{"version":3,"file":"static/js/367.3cbfb79b.chunk.js","mappings":"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","sources":["components/Desktop/Apps/Pong/Pong.tsx","components/Desktop/Apps/Pong/Sketch.tsx"],"sourcesContent":["import p5 from \"p5\";\nimport { memo, useEffect } from \"react\";\nimport { defineSketch } from \"./Sketch\";\nimport \"styles/Pong.css\"\nimport \"styles/buttons.css\"\nimport \"styles/inputs.css\"\nimport { default_win_height, default_win_width } from \"../../../../consts\";\n\nclass AudioFiles {\n\tPADDLE_HIT_1: any;\n\tPADDLE_HIT_2: any;\n\n\tBUMPER_HIT_1: any;\n\tBUMPER_HIT_2: any;\n\n\tWALL_HIT_1: any;\n\tWALL_HIT_2: any;\n\n\tBIP: any;\n\tBIP_FINAL: any;\n\n\tSCORE: any;\n\n\tCASINO_MUSIC: any;\n\tCITY_MUSIC: any;\n\tORIGINAL_MUSIC: any;\n\tMENU_MUSIC: any;\n\n\tmusic_playing: string;\n\tmax_volume: number;\n\n\tconstructor() {\n\t\tthis.PADDLE_HIT_1 = new Audio(\"/assets/sfx/paddle_hit_1.mp3\");\n\t\tthis.PADDLE_HIT_2 = new Audio(\"/assets/sfx/paddle_hit_2.mp3\");\n\n\t\tthis.BUMPER_HIT_1 = new Audio(\"/assets/sfx/bumper_hit_1.mp3\");\n\t\tthis.BUMPER_HIT_2 = new Audio(\"/assets/sfx/bumper_hit_2.mp3\");\n\n\t\tthis.WALL_HIT_1 = new Audio(\"/assets/sfx/paddle_hit_1.mp3\");\n\t\tthis.WALL_HIT_2 = new Audio(\"/assets/sfx/paddle_hit_2.mp3\");\n\n\t\tthis.BIP = new Audio(\"/assets/sfx/bip.mp3\");\n\t\tthis.BIP_FINAL = new Audio(\"/assets/sfx/bip-final.mp3\");\n\n\t\tthis.SCORE = new Audio(\"/assets/sfx/score.mp3\");\n\n\t\tthis.max_volume = 0;\n\n\t\tthis.CASINO_MUSIC = new Audio(\"/assets/music/casino.mp3\");\n\t\tthis.CASINO_MUSIC.loop = true;\n\t\tthis.CASINO_MUSIC.volume = this.max_volume;\n\n\t\tthis.CITY_MUSIC = new Audio(\"/assets/music/city.mp3\");\n\t\tthis.CITY_MUSIC.loop = true;\n\t\tthis.CITY_MUSIC.volume = this.max_volume;\n\n\t\tthis.ORIGINAL_MUSIC = new Audio(\"/assets/music/original.mp3\");\n\t\tthis.ORIGINAL_MUSIC.loop = true;\n\t\tthis.ORIGINAL_MUSIC.volume = this.max_volume;\n\n\t\tthis.MENU_MUSIC = new Audio(\"/assets/music/menu.mp3\");\n\t\tthis.MENU_MUSIC.loop = true;\n\t\tthis.MENU_MUSIC.volume = this.max_volume;\n\n\t\tthis.music_playing = \"none\";\n\t\tthis.PADDLE_HIT_1.autoplay = false;\n\t\tthis.PADDLE_HIT_2.autoplay = false;\n\t\tthis.BUMPER_HIT_1.autoplay = false;\n\t\tthis.BUMPER_HIT_2.autoplay = false;\n\t\tthis.WALL_HIT_1.autoplay = false;\n\t\tthis.WALL_HIT_2.autoplay = false;\n\t\tthis.BIP.autoplay = false;\n\t\tthis.BIP_FINAL.autoplay = false;\n\t\tthis.SCORE.autoplay = false;\n\t\tthis.MENU_MUSIC.autoplay = false;\n\t\tthis.ORIGINAL_MUSIC.autoplay = false;\n\t\tthis.CITY_MUSIC.autoplay = false;\n\t\tthis.CASINO_MUSIC.autoplay = false;\n\t}\n\n\tdeleteAudio() {\n\t\tthis.fadeMusicDown(this.PADDLE_HIT_1);\n\t\tthis.fadeMusicDown(this.PADDLE_HIT_2);\n\t\tthis.fadeMusicDown(this.BUMPER_HIT_1);\n\t\tthis.fadeMusicDown(this.BUMPER_HIT_2);\n\t\tthis.fadeMusicDown(this.WALL_HIT_1);\n\t\tthis.fadeMusicDown(this.WALL_HIT_2);\n\t\tthis.fadeMusicDown(this.BIP);\n\t\tthis.fadeMusicDown(this.BIP_FINAL);\n\t\tthis.fadeMusicDown(this.SCORE);\n\t\tthis.fadeMusicDown(this.CASINO_MUSIC);\n\t\tthis.fadeMusicDown(this.CITY_MUSIC);\n\t\tthis.fadeMusicDown(this.MENU_MUSIC);\n\t\tthis.fadeMusicDown(this.ORIGINAL_MUSIC);\n\t}\n\n\tplayBip(bip: any) {\n\t\tbip.currentTime = 0;\n\t\tbip.volume = this.max_volume;\n\t\tbip.play();\n\t}\n\n\tplayScore() {\n\t\tthis.SCORE.currentTime = 0;\n\t\tthis.SCORE.volume = this.max_volume;\n\t\tthis.SCORE.play();\n\t}\n\n\tplayRandomPaddleSound() {\n\t\tthis.PADDLE_HIT_1.volume = this.max_volume;\n\t\tthis.PADDLE_HIT_2.volume = this.max_volume;\n\n\t\tlet rand: number = Math.floor(Math.random() * 2);\n\t\tif (rand === 0) this.PADDLE_HIT_1.play();\n\t\telse if (rand === 1) this.PADDLE_HIT_2.play();\n\t}\n\n\tplayRandomWallSound() {\n\t\tthis.WALL_HIT_1.volume = this.max_volume;\n\t\tthis.WALL_HIT_2.volume = this.max_volume;\n\n\t\tlet rand: number = Math.floor(Math.random() * 2);\n\t\tif (rand === 0) this.WALL_HIT_1.play();\n\t\telse if (rand === 1) this.WALL_HIT_2.play();\n\t}\n\n\tplayRandomBumperSound() {\n\t\tthis.BUMPER_HIT_1.volume = this.max_volume;\n\t\tthis.BUMPER_HIT_2.volume = this.max_volume;\n\n\t\tlet rand: number = Math.floor(Math.random() * 2);\n\t\tif (rand === 0) this.BUMPER_HIT_1.play();\n\t\telse if (rand === 1) this.BUMPER_HIT_2.play();\n\t}\n\n\tmusicPlaying(): any {\n\t\tif (this.music_playing === \"menu\") return this.MENU_MUSIC;\n\t\telse if (this.music_playing === \"casino\") return this.CASINO_MUSIC;\n\t\telse if (this.music_playing === \"city\") return this.CITY_MUSIC;\n\t\telse if (this.music_playing === \"original\") return this.ORIGINAL_MUSIC;\n\t\telse return \"none\";\n\t}\n\n\tfadeMusicDown(music: any) {\n\t\tmusic.pause();\n\t}\n\n\tfadeMusicUp(music: any) {\n\t\tif (this.max_volume === 0) return;\n\t\tmusic.currentTime = 0;\n\t\tmusic.volume = this.max_volume;\n\t\tmusic.play();\n\t}\n\n\tswitchMusic(music: string) {\n\t\tlet tmp_music = this.musicPlaying();\n\t\tif (tmp_music !== \"none\") {\n\t\tif (music === \"menu\") {\n\t\t\tthis.fadeMusicDown(tmp_music);\n\t\t\tthis.fadeMusicUp(this.MENU_MUSIC);\n\t\t} else if (music === \"original\") {\n\t\t\tthis.fadeMusicDown(tmp_music);\n\t\t\tthis.fadeMusicUp(this.ORIGINAL_MUSIC);\n\t\t} else if (music === \"city\") {\n\t\t\tthis.fadeMusicDown(tmp_music);\n\t\t\tthis.fadeMusicUp(this.CITY_MUSIC);\n\t\t} else if (music === \"casino\") {\n\t\t\tthis.fadeMusicDown(tmp_music);\n\t\t\tthis.fadeMusicUp(this.CASINO_MUSIC);\n\t\t}\n\t\tif (music === \"none\") this.fadeMusicDown(tmp_music);\n\t\tthis.music_playing = music;\n\t\t} else {\n\t\tif (music === \"menu\") this.fadeMusicUp(this.MENU_MUSIC);\n\t\telse if (music === \"original\") this.fadeMusicUp(this.ORIGINAL_MUSIC);\n\t\telse if (music === \"city\") this.fadeMusicUp(this.CITY_MUSIC);\n\t\telse if (music === \"casino\") this.fadeMusicUp(this.CASINO_MUSIC);\n\t\tthis.music_playing = music;\n\t\t}\n\t}\n\n\tplayAppropriateMusic(state : string, map_name : string) {\n\t\tif (\n\t\t(state === \"countdown\" ||\n\t\t\tstate === \"spectate\" ||\n\t\t\tstate === \"in-game\" ||\n\t\t\tstate === \"waiting-readiness\" ||\n\t\t\tstate === \"waiting-player\") &&\n\t\tthis.music_playing === \"menu\"\n\t\t)\n\t\tthis.switchMusic(map_name);\n\t\telse if (\n\t\t(state === \"in-menu\" ||\n\t\t\tstate === \"in-menu-create\" ||\n\t\t\tstate === \"in-menu-input\") &&\n\t\tthis.music_playing !== \"menu\"\n\t\t)\n\t\tthis.switchMusic(\"menu\");\n\t}\n}\n\nexport let audio_files : AudioFiles;\nlet p: any = null;\n\nconst Pong = ({forcedUpdate}: {forcedUpdate: boolean}) => {\n\tuseEffect(() => {\n\t\taudio_files = new AudioFiles();\n\t\tlet pongSketch = defineSketch(default_win_width, default_win_height)\n\t\tp = new p5(pongSketch)\n\t\t// ? useless while loop to remove warning about unused variables\n\t\twhile (p)\n\t\t\tbreak;\n\n\t\treturn () => {\n\t\t\taudio_files.deleteAudio();\n\t\t  };\n\t}, []);\n\n\treturn (\n\t\t<div className=\"Canvas\" id={\"canvas-pong-parent\"}>\n\t\t\t<div id=\"main-menu-button-grid\">\n\t\t\t\t<div id=\"button-create\" className=\"large-button\"/>\n\t\t\t\t<div id=\"button-join\" className=\"large-button\"/>\n\t\t\t\t<div id=\"button-matchmaking\" className=\"large-button\"/>\n\t\t\t</div>\n\t\t\t<div id=\"create-menu-button-grid\">\n\t\t\t\t<div id=\"button-anyone\"/>\n\t\t\t\t<div id=\"button-invitation\"/>\n\t\t\t\t<div id=\"button-local\"/>\n\t\t\t</div>\n\t\t\t<div id=\"button-ai\"/>\n\t\t\t<div id=\"button-validate\"/>\n\t\t\t<div id=\"button-return\"/>\n\t\t\t<div id=\"button-sound\"/>\n\t\t\t<div id=\"button-map-original\"/>\n\t\t\t<div id=\"button-map-city\"/>\n\t\t\t<div id=\"button-map-casino\"/>\n\t\t\t<div id=\"button-map-secret\"/>\n\t\t\t<div id=\"button-spectate\"/>\n\t\t\t<div id=\"buttons-plus-minus\">\t\n\t\t\t\t<div id=\"button-plus\"/>\n\t\t\t\t<div id=\"button-minus\"/>\n\t\t\t</div>\n\t\t\t<div id=\"input-join\"/>\n\t\t\t<div id=\"input-score_limit\"/>\n\t\t\t<div id=\"button-opp-left-ok\"/>\n\t\t</div>\n\t)\n}\n\nexport default memo(Pong);","import \"styles/Pong.css\"\nimport { audio_files } from \"./Pong\";\nimport p5 from \"p5\";\n\n// ? need to wrap p5 sketch in another function to pass arguments\nexport const defineSketch = (initialWidth: number, initialHeight: number) : any => {\n\treturn (p: p5) => {\n\t\t\n\t\tp.disableFriendlyErrors = true;\n\n\t\tlet spritesheet: any;\n\t\tlet spritedata: any;\n\n\t\tlet animation: any[] = [];\n\t\tlet bumpers: any[] = [];\n\n\t\tlet consts: Consts;\n\t\tlet game: Game;\n\t\tlet errors: Errors;\n\t\tlet buttons: Buttons;\n\t\tlet inputs: Inputs;\n\t\tlet keys: Keys;\n\n\t\tlet canvas: any;\n\n\t\tclass Bumper {\n\t\tanimation: any;\n\t\tpos: Vector;\n\t\tcenter: Vector;\n\t\tspeed: number;\n\t\tlen: number;\n\t\tindex: number;\n\t\tdiameter: number;\n\n\t\tindex_bumper: number;\n\n\t\thit: boolean;\n\t\tcollision: Vector;\n\t\tbounce_vec: Vector;\n\n\t\tframe_count_shake: number;\n\n\t\tconstructor(\n\t\t\tanimation: any,\n\t\t\tx: number,\n\t\t\ty: number,\n\t\t\tdiameter: number,\n\t\t\tindex: number\n\t\t) {\n\t\t\tthis.speed = 0;\n\t\t\tthis.pos = new Vector([x, y]);\n\t\t\tthis.center = new Vector([x + diameter / 2, y + diameter / 2]);\n\t\t\tthis.collision = new Vector([0, 0]);\n\t\t\tthis.bounce_vec = new Vector([0, 0]);\n\t\t\tthis.animation = animation;\n\t\t\tthis.len = this.animation.length;\n\t\t\tthis.index = 0;\n\t\t\tthis.hit = false;\n\t\t\tthis.diameter = diameter;\n\t\t\tthis.index_bumper = index;\n\t\t\tthis.frame_count_shake = 0;\n\t\t}\n\n\t\tresize() {\n\t\t\tlet diameter = consts.DIAGONAL * 0.1;\n\n\t\t\tthis.diameter = diameter;\n\n\t\t\tthis.pos.x = consts.WIDTH / 2 - diameter / 2;\n\t\t\tif (this.index_bumper === 1)\n\t\t\tthis.pos.y = (consts.HEIGHT * 1) / 4 - diameter / 2;\n\t\t\telse if (this.index_bumper === 2)\n\t\t\tthis.pos.y = (consts.HEIGHT * 3) / 4 - diameter / 2;\n\t\t\tthis.center.x = this.pos.x + diameter / 2;\n\t\t\tthis.center.y = this.pos.y + diameter / 2;\n\t\t}\n\n\t\tshow(ratio: number) {\n\t\t\tlet index = this.index % this.len;\n\t\t\tp.push();\n\t\t\tif (this.hit && this.frame_count_shake < 30)\n\t\t\tp.translate(Math.floor(p.random(-5, 6)), Math.floor(p.random(-5, 6)));\n\t\t\tp.image(\n\t\t\tthis.animation[index],\n\t\t\tthis.pos.x * ratio,\n\t\t\tthis.pos.y * ratio,\n\t\t\tthis.diameter * ratio,\n\t\t\tthis.diameter * ratio\n\t\t\t);\n\t\t\tp.pop();\n\t\t}\n\n\t\tanimate() {\n\t\t\tthis.index += 1;\n\t\t\tthis.frame_count_shake++;\n\t\t\tif (this.index >= this.len) {\n\t\t\tthis.index = 0;\n\t\t\tthis.hit = false;\n\t\t\t}\n\t\t}\n\n\t\tresetAnimation() {\n\t\t\tthis.index = 0;\n\t\t\tthis.frame_count_shake = 0;\n\t\t}\n\n\t\trender(ratio: number) {\n\t\t\tthis.show(ratio);\n\t\t\tif (this.hit) this.animate();\n\t\t}\n\n\t\tcheckCollision(pong: Pong) {\n\t\t\tlet e = new Vector(pong.center());\n\t\t\tlet l = new Vector(pong.centerNextFrame());\n\n\t\t\tlet cp = this.center;\n\t\t\tlet r = (this.diameter * 0.85) / 2;\n\n\t\t\tlet d = sub_vec(l, e);\n\t\t\tlet f = sub_vec(e, cp);\n\n\t\t\tlet a = d.dot(d);\n\t\t\tlet b = 2 * f.dot(d);\n\t\t\tlet c = f.dot(f) - r * r;\n\n\t\t\tlet discriminant = b * b - 4 * a * c;\n\t\t\tif (discriminant >= 0) {\n\t\t\tdiscriminant = Math.sqrt(discriminant);\n\n\t\t\tlet t1 = (-b - discriminant) / (2 * a);\n\n\t\t\tif (t1 >= 0 && t1 <= 1) {\n\t\t\t\t// t1 is the intersection, and it's closer than t2\n\t\t\t\t// (since t1 uses -b - discriminant)\n\t\t\t\t// Impale, Poke\n\t\t\t\tthis.collision.x = e.x + t1;\n\t\t\t\tthis.collision.y = e.y;\n\t\t\t\tthis.hit = true;\n\n\t\t\t\tthis.bounce_vec = sub_vec(this.collision, this.center);\n\t\t\t\tthis.bounce_vec.normalize();\n\t\t\t\tlet vec_pong = new Vector(pong.velocity);\n\t\t\t\tthis.bounce_vec.mult(vec_pong.mag());\n\t\t\t\tpong.velocity[0] = this.bounce_vec.x;\n\t\t\t\tpong.velocity[1] = this.bounce_vec.y;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t}\n\n\t\tclass Buttons {\n\t\tcreate_game: any;\n\t\tjoin: any;\n\t\treturn: any;\n\t\tmatchmaking: any;\n\n\t\tanyone_can_join: any;\n\t\tinvitation_only: any;\n\t\tlocal: any;\n\t\tai: any;\n\t\tvalidate: any;\n\n\t\tplus: any;\n\t\tminus: any;\n\n\t\topponent_left_ok: any;\n\n\t\tmap_original: any;\n\t\tmap_city: any;\n\t\tmap_casino: any;\n\t\tmap_secret : any;\n\n\t\tspectate: any;\n\n\t\tsound: any;\n\n\t\tconstructor() {\n\t\t\tthis.reset();\n\t\t}\n\n\t\tcreateButtons() {\n\t\t\tthis.create_game = createCustomButton(\n\t\t\t\"Create game\",\n\t\t\tcreateGameMenu,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.std_width,\n\t\t\tconsts.std_height\n\t\t\t);\n\t\t\tthis.create_game.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.join = createCustomButton(\n\t\t\t\"Join game\",\n\t\t\treadRoomID,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.std_width,\n\t\t\tconsts.std_height\n\t\t\t);\n\t\t\tthis.join.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.matchmaking = createCustomButton(\n\t\t\t\"Match making\",\n\t\t\tmatchmaking,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.std_width,\n\t\t\tconsts.std_height\n\t\t\t);\n\t\t\tthis.matchmaking.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.return = createCustomButton(\n\t\t\t\"\",\n\t\t\tgoToMainMenu,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_square_diameter,\n\t\t\tconsts.medium_square_diameter\n\t\t\t);\n\t\t\tthis.return.style(\"border\", \"none\");\n\t\t\tthis.return.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.return.position(consts.WIDTH * 0.9, consts.HEIGHT * 0.01);\n\n\t\t\tthis.sound = createCustomButton(\n\t\t\t\"\",\n\t\t\tclickSound,\n\t\t\thighlightSoundButton,\n\t\t\tresetSoundButton,\n\t\t\tconsts.medium_square_diameter,\n\t\t\tconsts.medium_square_diameter\n\t\t\t);\n\t\t\tthis.sound.style(\"border\", \"none\");\n\t\t\tthis.sound.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.sound.size(\n\t\t\tconsts.small_square_diameter * 1.65,\n\t\t\tconsts.small_square_diameter * 1.65\n\t\t\t);\n\t\t\tthis.sound.position(consts.WIDTH * 0.8, consts.HEIGHT * 0.02);\n\n\t\t\tthis.anyone_can_join = createCustomButton(\n\t\t\t\"Anyone can join\",\n\t\t\tclickAnyone,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_width,\n\t\t\tconsts.medium_height\n\t\t\t);\n\t\t\tthis.anyone_can_join.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.anyone_can_join.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.anyone_can_join.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tthis.anyone_can_join.style(\"outline\", \"none\");\n\t\t\tthis.invitation_only = createCustomButton(\n\t\t\t\"Invitation only\",\n\t\t\tclickInvitation,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_width,\n\t\t\tconsts.medium_height\n\t\t\t);\n\t\t\tthis.invitation_only.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.invitation_only.style(\"border\", \"none\");\n\t\t\tthis.invitation_only.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.local = createCustomButton(\n\t\t\t\"Play local\",\n\t\t\tclickLocal,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_width,\n\t\t\tconsts.medium_height\n\t\t\t);\n\t\t\tthis.local.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.local.style(\"font-size\", consts.medium_font_size.toString() + \"px\");\n\t\t\tthis.local.style(\"border\", \"none\");\n\t\t\tthis.ai = createCustomButton(\n\t\t\t\"vs AI\",\n\t\t\tclickAi,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_width,\n\t\t\tconsts.medium_height\n\t\t\t);\n\t\t\tthis.ai.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.ai.style(\"font-size\", consts.medium_font_size.toString() + \"px\");\n\t\t\tthis.ai.style(\"border\", \"none\");\n\t\t\tthis.validate = createCustomButton(\n\t\t\t\"Create\",\n\t\t\tcreateGame,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.medium_width,\n\t\t\tconsts.medium_height\n\t\t\t);\n\t\t\tthis.validate.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.validate.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.plus = createCustomButton(\n\t\t\t\"+\",\n\t\t\tplusScoreLimit,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.small_square_diameter,\n\t\t\tconsts.small_square_diameter\n\t\t\t);\n\t\t\tthis.plus.style(\"border\", \"none\");\n\t\t\tthis.plus.style(\"font-size\", consts.small_font_size.toString() + \"px\");\n\t\t\tthis.minus = createCustomButton(\n\t\t\t\"-\",\n\t\t\tminusScoreLimit,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.small_square_diameter,\n\t\t\tconsts.small_square_diameter\n\t\t\t);\n\t\t\tthis.minus.style(\"border\", \"none\");\n\t\t\tthis.minus.style(\"font-size\", consts.small_font_size.toString() + \"px\");\n\n\t\t\tthis.opponent_left_ok = createCustomButton(\n\t\t\t\"OK\",\n\t\t\tgoToMainMenu,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.std_width,\n\t\t\tconsts.std_height\n\t\t\t);\n\t\t\tthis.opponent_left_ok.style(\"border\", \"none\");\n\n\t\t\tthis.map_original = createCustomButton(\n\t\t\t\"Original\",\n\t\t\tclickMapOriginal,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.WIDTH * 0.2 + consts.WIDTH / 48,\n\t\t\tconsts.HEIGHT * 0.2 + consts.WIDTH / 48\n\t\t\t);\n\t\t\tthis.map_original.style(\"background\", \"none\");\n\t\t\tthis.map_original.style(\"outline\", \"none\");\n\t\t\tthis.map_original.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.map_city = createCustomButton(\n\t\t\t\"City\",\n\t\t\tclickMapCity,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.WIDTH * 0.2 + consts.WIDTH / 48,\n\t\t\tconsts.HEIGHT * 0.2 + consts.WIDTH / 48\n\t\t\t);\n\t\t\tthis.map_city.style(\"background\", \"none\");\n\t\t\tthis.map_city.style(\"border\", \"none\");\n\t\t\tthis.map_city.style(\"outline\", \"none\");\n\t\t\tthis.map_casino = createCustomButton(\n\t\t\t\"Casino\",\n\t\t\tclickMapCasino,\n\t\t\thighlightButton,\n\t\t\tresetButton,\n\t\t\tconsts.WIDTH * 0.2 + consts.WIDTH / 48,\n\t\t\tconsts.HEIGHT * 0.2 + consts.WIDTH / 48\n\t\t\t);\n\t\t\tthis.map_casino.style(\"background\", \"none\");\n\t\t\tthis.map_casino.style(\"border\", \"none\");\n\t\t\tthis.map_casino.style(\"outline\", \"none\");\n\n\t\t\tthis.map_original.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_city.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_casino.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.map_original.position(consts.WIDTH * 0.0855, consts.HEIGHT * 0.56);\n\t\t\tthis.map_city.position(consts.WIDTH * 0.3855, consts.HEIGHT * 0.56);\n\t\t\tthis.map_casino.position(consts.WIDTH * 0.6855, consts.HEIGHT * 0.56);\n\n\t\t\tthis.map_secret = createCustomButton(\"*\", clickMapSecret, highlightButton, resetButton, consts.small_square_diameter, consts.small_square_diameter);\n\t\t\tthis.map_secret.style(\"border\", \"none\");\n\t\t\tthis.map_secret.style(\"background\", \"none\");\n\n\t\t\tthis.spectate = createCustomButton(\n\t\t\t\"\",\n\t\t\tclickSpectate,\n\t\t\thighlightSpectateButton,\n\t\t\tresetSpectateButton,\n\t\t\tconsts.WIDTH * 0.1,\n\t\t\tconsts.HEIGHT * 0.15\n\t\t\t);\n\t\t\tthis.spectate.style(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\t\t\tthis.spectate.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tthis.spectate.style(\"position\", \"absolute\");\n\t\t\tthis.spectate.position(consts.WIDTH * 0.04, consts.HEIGHT * 0.03 + 35);\n\n\t\t\tthis.hide();\n\t\t\tthis.addParent();\n\n\t\t\tthis.matchmaking.show();\n\t\t\tthis.create_game.show();\n\t\t\tthis.join.show();\n\n\t\t\tthis.map_secret.show();\n\t\t}\n\n\t\tresize() {\n\t\t\tthis.create_game.size(consts.std_width, consts.std_height);\n\t\t\tthis.create_game.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.std_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.create_game.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.join.size(consts.std_width, consts.std_height);\n\t\t\tthis.join.style(\"font-size\", consts.std_font_size.toString() + \"px\");\n\t\t\tthis.join.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.matchmaking.size(consts.std_width, consts.std_height);\n\t\t\tthis.matchmaking.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.std_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.matchmaking.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.opponent_left_ok.size(consts.std_width, consts.std_height);\n\t\t\tthis.opponent_left_ok.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.std_font_size.toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.anyone_can_join.size(consts.medium_width, consts.medium_height);\n\t\t\tthis.anyone_can_join.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.anyone_can_join.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.invitation_only.size(consts.medium_width, consts.medium_height);\n\t\t\tthis.invitation_only.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.invitation_only.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.local.size(consts.medium_width, consts.medium_height);\n\t\t\tthis.local.style(\"font-size\", consts.medium_font_size.toString() + \"px\");\n\t\t\tthis.local.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.ai.size(consts.medium_width, consts.medium_height);\n\t\t\tthis.ai.style(\"font-size\", consts.medium_font_size.toString() + \"px\");\n\t\t\tthis.ai.style(\"border-width\", (consts.DIAGONAL / 250).toString() + \"px\");\n\t\t\tthis.validate.size(consts.medium_width, consts.medium_height);\n\t\t\tthis.validate.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.validate.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.plus.size(\n\t\t\tconsts.small_square_diameter,\n\t\t\tconsts.small_square_diameter\n\t\t\t);\n\t\t\tthis.plus.style(\"font-size\", consts.small_font_size.toString() + \"px\");\n\t\t\tthis.minus.size(\n\t\t\tconsts.small_square_diameter,\n\t\t\tconsts.small_square_diameter\n\t\t\t);\n\t\t\tthis.minus.style(\"font-size\", consts.small_font_size.toString() + \"px\");\n\n\t\t\tthis.return.size(\n\t\t\tconsts.medium_square_diameter,\n\t\t\tconsts.medium_square_diameter\n\t\t\t);\n\t\t\tthis.return.style(\"font-size\", consts.medium_font_size.toString() + \"px\");\n\t\t\tthis.return.position(consts.WIDTH * 0.9, consts.HEIGHT * 0.01);\n\n\t\t\tthis.sound.size(\n\t\t\tconsts.small_square_diameter * 1.65,\n\t\t\tconsts.small_square_diameter * 1.65\n\t\t\t);\n\t\t\tthis.sound.position(consts.WIDTH * 0.8, consts.HEIGHT * 0.02);\n\n\t\t\tthis.map_original.size(\n\t\t\tconsts.WIDTH * 0.2 + consts.DIAGONAL * 0.025,\n\t\t\tconsts.HEIGHT * 0.2 + consts.DIAGONAL * 0.025\n\t\t\t);\n\t\t\tthis.map_original.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_city.size(\n\t\t\tconsts.WIDTH * 0.2 + consts.DIAGONAL * 0.025,\n\t\t\tconsts.HEIGHT * 0.2 + consts.DIAGONAL * 0.025\n\t\t\t);\n\t\t\tthis.map_city.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_casino.size(\n\t\t\tconsts.WIDTH * 0.2 + consts.DIAGONAL * 0.025,\n\t\t\tconsts.HEIGHT * 0.2 + consts.DIAGONAL * 0.025\n\t\t\t);\n\t\t\tthis.map_casino.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.medium_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_secret.position(consts.WIDTH * 0.01, consts.HEIGHT * 0.93);\n\t\t\tthis.map_secret.size(\n\t\t\tconsts.small_square_diameter,\n\t\t\tconsts.small_square_diameter\n\t\t\t);\n\t\t\tthis.map_secret.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.small_font_size.toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.map_original.position(consts.WIDTH * 0.0855, consts.HEIGHT * 0.56);\n\t\t\tthis.map_original.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_city.position(consts.WIDTH * 0.3855, consts.HEIGHT * 0.56);\n\t\t\tthis.map_city.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.map_casino.position(consts.WIDTH * 0.6855, consts.HEIGHT * 0.56);\n\t\t\tthis.map_casino.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\n\t\t\tthis.spectate.size(consts.WIDTH * 0.1, consts.HEIGHT * 0.1);\n\t\t\tthis.spectate.style(\n\t\t\t\"border-width\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px\"\n\t\t\t);\n\t\t\tthis.spectate.position(consts.WIDTH * 0.04, consts.HEIGHT * 0.03 + 35);\n\t\t}\n\n\t\tdelete() {\n\t\t\tif (this.create_game)\n\t\t\t\tthis.create_game.remove();\n\t\t\tthis.create_game = null;\n\t\t\tif (this.join) this.join.remove();\n\t\t\tthis.join = null;\n\t\t\tif (this.matchmaking) this.matchmaking.remove();\n\t\t\tthis.matchmaking = null;\n\t\t\tif (this.return) this.return.remove();\n\t\t\tthis.return = null;\n\n\t\t\tif (this.sound)\n\t\t\t\tthis.sound.remove();\n\t\t\tthis.sound = null;\n\n\t\t\tif (this.anyone_can_join) this.anyone_can_join.remove();\n\t\t\tthis.anyone_can_join = null;\n\t\t\tif (this.invitation_only) this.invitation_only.remove();\n\t\t\tthis.invitation_only = null;\n\t\t\tif (this.local) this.local.remove();\n\t\t\tthis.local = null;\n\t\t\tif (this.ai) this.ai.remove();\n\t\t\tthis.ai = null;\n\t\t\tif (this.validate) this.validate.remove();\n\t\t\tthis.validate = null;\n\n\t\t\tif (this.plus) this.plus.remove();\n\t\t\tthis.plus = null;\n\t\t\tif (this.minus) this.minus.remove();\n\t\t\tthis.minus = null;\n\t\t\tif (this.opponent_left_ok) this.opponent_left_ok.remove();\n\t\t\tthis.opponent_left_ok = null;\n\n\t\t\tif (this.map_original) this.map_original.remove();\n\t\t\tthis.map_original = null;\n\t\t\tif (this.map_city) this.map_city.remove();\n\t\t\tthis.map_city = null;\n\t\t\tif (this.map_casino) this.map_casino.remove();\n\t\t\tthis.map_casino = null;\n\t\t\tif (this.map_secret) this.map_secret.remove();\n\t\t\tthis.map_secret = null;\n\n\t\t\tif (this.spectate) this.spectate.remove();\n\t\t\tthis.spectate = null;\n\n\t\t\tremoveChildren(\"button-create\");\n\t\t\tremoveChildren(\"button-join\");\n\t\t\tremoveChildren(\"button-matchmaking\");\n\t\t\tremoveChildren(\"button-anyone\");\n\t\t\tremoveChildren(\"button-invitation\");\n\t\t\tremoveChildren(\"button-local\");\n\t\t\tremoveChildren(\"button-ai\");\n\t\t\tremoveChildren(\"button-validate\");\n\t\t\tremoveChildren(\"button-return\");\n\t\t\tremoveChildren(\"button-sound\");\n\t\t\tremoveChildren(\"button-map-original\");\n\t\t\tremoveChildren(\"button-map-city\");\n\t\t\tremoveChildren(\"button-map-casino\");\n\t\t\tremoveChildren(\"button-map-secret\");\n\t\t\tremoveChildren(\"button-spectate\");\n\t\t\tremoveChildren(\"button-plus\");\n\t\t\tremoveChildren(\"button-minus\");\n\t\t\tremoveChildren(\"button-opp-left-ok\");\n\t\t}\n\n\t\treset() {\n\t\t\tthis.delete();\n\t\t\tthis.createButtons();\n\t\t\tthis.resize();\n\t\t}\n\n\t\thide() {\n\t\t\tthis.create_game.hide();\n\t\t\tthis.join.hide();\n\t\t\tthis.return.hide();\n\t\t\tthis.matchmaking.hide();\n\t\t\tthis.sound.hide();\n\n\t\t\tthis.anyone_can_join.hide();\n\t\t\tthis.invitation_only.hide();\n\t\t\tthis.local.hide();\n\t\t\tthis.ai.hide();\n\t\t\tthis.validate.hide();\n\n\t\t\tthis.plus.hide();\n\t\t\tthis.minus.hide();\n\n\t\t\tthis.opponent_left_ok.hide();\n\n\t\t\tthis.map_original.hide();\n\t\t\tthis.map_city.hide();\n\t\t\tthis.map_casino.hide();\n\t\t\tthis.map_secret.hide();\n\n\t\t\tthis.spectate.hide();\n\t\t}\n\n\t\tclickAnyone() {\n\t\t\tthis.anyone_can_join.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tthis.local.style(\"border\", \"none\");\n\t\t\tthis.invitation_only.style(\"border\", \"none\");\n\n\t\t\tthis.ai.hide();\n\t\t\tthis.ai.style(\"border\", \"none\");\n\t\t\tgame.ai = false;\n\n\t\t\treturn \"public\";\n\t\t}\n\n\t\tclickLocal() {\n\t\t\tthis.anyone_can_join.style(\"border\", \"none\");\n\t\t\tthis.local.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tthis.invitation_only.style(\"border\", \"none\");\n\n\t\t\tthis.ai.show();\n\n\t\t\treturn \"local\";\n\t\t}\n\n\t\tclickInvitation() {\n\t\t\tthis.anyone_can_join.style(\"border\", \"none\");\n\t\t\tthis.local.style(\"border\", \"none\");\n\t\t\tthis.invitation_only.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\n\t\t\tthis.ai.hide();\n\t\t\tthis.ai.style(\"border\", \"none\");\n\t\t\tgame.ai = false;\n\n\t\t\treturn \"private\";\n\t\t}\n\n\t\taddParent() {\n\t\t\tif (!parent)\n\t\t\t\treturn ;\n\t\t\tthis.create_game.parent(document.getElementById(\"button-create\"));\n\t\t\tthis.join.parent(document.getElementById(\"button-join\"));\n\t\t\tthis.matchmaking.parent(document.getElementById(\"button-matchmaking\"));\n\t\t\tthis.return.parent(document.getElementById(\"button-return\"));\n\t\t\tthis.sound.parent(document.getElementById(\"button-sound\"));\n\t\t\tthis.anyone_can_join.parent(document.getElementById(\"button-anyone\"));\n\t\t\tthis.local.parent(document.getElementById(\"button-local\"));\n\t\t\tthis.invitation_only.parent(document.getElementById(\"button-invitation\"));\n\t\t\tthis.ai.parent(document.getElementById(\"button-ai\"));\n\t\t\tthis.validate.parent(document.getElementById(\"button-validate\"));\n\t\t\tthis.plus.parent(document.getElementById(\"button-plus\"));\n\t\t\tthis.minus.parent(document.getElementById(\"button-minus\"));\n\t\t\tthis.opponent_left_ok.parent(\n\t\t\tdocument.getElementById(\"button-opp-left-ok\")\n\t\t\t);\n\n\t\t\tthis.map_original.parent(document.getElementById(\"button-map-original\"));\n\t\t\tthis.map_city.parent(document.getElementById(\"button-map-city\"));\n\t\t\tthis.map_casino.parent(document.getElementById(\"button-map-casino\"));\n\t\t\tthis.map_secret.parent(document.getElementById(\"button-map-secret\"));\n\n\t\t\tthis.spectate.parent(document.getElementById(\"button-spectate\"));\n\t\t}\n\t\t}\n\n\t\tclass Consts {\n\t\tWIDTH: number;\n\t\tHEIGHT: number;\n\t\tDIAGONAL: number;\n\n\t\tOLD_WIDTH: number;\n\t\tOLD_HEIGHT: number;\n\n\t\tPLAYER_WIDTH: number;\n\t\tPLAYER_HEIGHT: number;\n\t\tPLAYER_SPEED: number;\n\t\tAI_SPEED: number;\n\n\t\tBREAKOUT_WIDTH: number;\n\t\tBREAKOUT_HEIGHT: number;\n\n\t\tPONG_DIAMETER: number;\n\t\tPONG_BASE_SPEED: number;\n\t\tPONG_MAX_SPEED: number;\n\t\tPONG_ACCELERATION: number;\n\t\tPONG_ACCELERATION_ACUTE_ANGLE: number;\n\t\tPONG_COLOR: string;\n\n\t\tTOP_BOUND: number;\n\t\tBOT_BOUND: number;\n\t\tLEFT_BOUND: number;\n\t\tRIGHT_BOUND: number;\n\n\t\tstd_font_size: number;\n\t\tmedium_font_size: number;\n\t\tsmall_font_size: number;\n\n\t\tstd_width: number;\n\t\tstd_height: number;\n\t\tmedium_width: number;\n\t\tmedium_height: number;\n\n\t\tmedium_square_diameter: number;\n\t\tsmall_square_diameter: number;\n\n\t\toriginal_map: GameMap;\n\t\tcity_map: GameMap;\n\t\tcasino_map: GameMap;\n\t\tsecret_map : GameMap;\n\n\t\tFONT: any;\n\t\tRETURN_ICON: any;\n\t\tCROSS_ICON: any;\n\t\tCROSS_ICON2: any;\n\t\tMARK_ICON: any;\n\t\tEYE_ICON: any;\n\t\tSOUND_ICON: any;\n\t\tCITY_BACKGROUND: any;\n\t\tTOKYO_BACKGROUND: any;\n\n\t\tconstructor() {\n\t\t\tthis.WIDTH = initialWidth;\n\t\t\tthis.HEIGHT = initialHeight;\n\n\t\t\tthis.original_map = new GameMap(1, this.WIDTH, this.HEIGHT);\n\t\t\tthis.city_map = new GameMap(2, this.WIDTH, this.HEIGHT); \n\t\t\tthis.casino_map = new GameMap(3, this.WIDTH, this.HEIGHT);\n\t\t\tthis.secret_map = new GameMap(4, this.WIDTH, this.HEIGHT);\n\n\t\t\tthis.OLD_WIDTH = this.WIDTH;\n\t\t\tthis.OLD_HEIGHT = this.HEIGHT;\n\n\t\t\tthis.WIDTH = parent.clientWidth;\n\t\t\tthis.HEIGHT = parent.clientHeight;\n\n\t\t\tthis.DIAGONAL = Math.sqrt(\n\t\t\tMath.pow(this.WIDTH, 2) + Math.pow(this.HEIGHT, 2)\n\t\t\t);\n\n\t\t\tthis.PLAYER_WIDTH = this.WIDTH / 80;\n\t\t\tthis.PLAYER_HEIGHT = this.HEIGHT / 9;\n\t\t\tthis.PLAYER_SPEED = this.DIAGONAL / 125;\n\t\t\tthis.AI_SPEED = this.DIAGONAL / 175;\n\n\t\t\tthis.BREAKOUT_WIDTH = this.PLAYER_WIDTH * 0.8;\n\t\t\tthis.BREAKOUT_HEIGHT = this.PLAYER_HEIGHT * 0.8;\n\n\t\t\tthis.PONG_DIAMETER = this.DIAGONAL / 120;\n\t\t\tthis.PONG_BASE_SPEED = this.DIAGONAL / 150;\n\t\t\tthis.PONG_MAX_SPEED = this.PONG_BASE_SPEED * 2;\n\t\t\tthis.PONG_ACCELERATION = this.PONG_BASE_SPEED / 2800;\n\t\t\tthis.PONG_ACCELERATION_ACUTE_ANGLE = this.PONG_BASE_SPEED / 28;\n\t\t\tthis.PONG_COLOR = \"white\";\n\n\t\t\tthis.std_width = this.WIDTH / 4;\n\t\t\tthis.std_height = this.HEIGHT / 4;\n\t\t\tthis.medium_width = this.WIDTH / 3.5;\n\t\t\tthis.medium_height = this.HEIGHT / 10;\n\n\t\t\tthis.medium_square_diameter = this.DIAGONAL / 14;\n\t\t\tthis.small_square_diameter = this.DIAGONAL / 28;\n\n\t\t\tthis.std_font_size =\n\t\t\tMath.sqrt(Math.pow(this.std_width, 2) + Math.pow(this.std_height, 2)) /\n\t\t\t8;\n\t\t\tthis.medium_font_size =\n\t\t\tMath.sqrt(\n\t\t\t\tMath.pow(this.medium_width, 2) + Math.pow(this.medium_height, 2)\n\t\t\t) / 14;\n\t\t\tthis.small_font_size =\n\t\t\tMath.sqrt(\n\t\t\t\tMath.pow(this.small_square_diameter, 2) +\n\t\t\t\tMath.pow(this.small_square_diameter, 2)\n\t\t\t) / 1.7;\n\n\t\t\tthis.original_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.city_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.casino_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.secret_map.resize(this.WIDTH, this.HEIGHT);\n\n\t\t\tthis.TOP_BOUND = this.original_map.wall_width * 2;\n\t\t\tthis.BOT_BOUND = this.HEIGHT - this.original_map.wall_width * 2;\n\t\t\tthis.LEFT_BOUND = 0;\n\t\t\tthis.RIGHT_BOUND = this.WIDTH;\n\n\t\t\tthis.FONT = p.loadFont(\"/assets/fonts/PressStart2P-Regular.ttf\");\n\n\t\t\tthis.RETURN_ICON = p.loadImage(\"/assets/icons/return-button2.png\");\n\n\t\t\tthis.CROSS_ICON = p.loadImage(\"/assets/icons/red-cross.png\");\n\t\t\tthis.CROSS_ICON2 = p.loadImage(\"/assets/icons/red-cross.png\");\n\t\t\tthis.MARK_ICON = p.loadImage(\"/assets/icons/green-mark.png\");\n\n\t\t\tthis.EYE_ICON = p.loadImage(\"/assets/icons/eye-icon.png\");\n\t\t\tthis.SOUND_ICON = p.loadImage(\"/assets/icons/sfx_icon.png\");\n\n\t\t\tthis.CITY_BACKGROUND = p.loadImage(\"/assets/backgrounds/city.jpg\");\n\t\t\tthis.TOKYO_BACKGROUND = p.loadImage(\"/assets/backgrounds/tokyo.png\");\n\t\t}\n\n\n\t\tsetWindowSize() {\n\t\t\tthis.OLD_WIDTH = this.WIDTH;\n\t\t\tthis.OLD_HEIGHT = this.HEIGHT;\n\n\t\t\tthis.WIDTH = parent.clientWidth;\n\t\t\tthis.HEIGHT = parent.clientHeight;\n\t\t\tthis.DIAGONAL = Math.sqrt(\n\t\t\tMath.pow(this.WIDTH, 2) + Math.pow(this.HEIGHT, 2)\n\t\t\t);\n\t\t}\n\n\t\tresize() {\n\t\t\tthis.setWindowSize();\n\n\t\t\tthis.PLAYER_WIDTH = this.WIDTH / 80;\n\t\t\tthis.PLAYER_HEIGHT = this.HEIGHT / 9;\n\t\t\tthis.PLAYER_SPEED = this.DIAGONAL / 125;\n\t\t\tthis.AI_SPEED = this.DIAGONAL / 175;\n\n\t\t\tthis.BREAKOUT_WIDTH = this.PLAYER_WIDTH * 0.8;\n\t\t\tthis.BREAKOUT_HEIGHT = this.PLAYER_HEIGHT * 0.8;\n\n\t\t\tthis.PONG_DIAMETER = this.DIAGONAL / 120;\n\t\t\tthis.PONG_BASE_SPEED = this.DIAGONAL / 150;\n\t\t\tthis.PONG_MAX_SPEED = this.PONG_BASE_SPEED * 2;\n\t\t\tthis.PONG_ACCELERATION = this.PONG_BASE_SPEED / 2800;\n\t\t\tthis.PONG_ACCELERATION_ACUTE_ANGLE = this.PONG_BASE_SPEED / 28;\n\t\t\tthis.PONG_COLOR = \"white\";\n\n\t\t\tthis.std_width = this.WIDTH / 4;\n\t\t\tthis.std_height = this.HEIGHT / 4;\n\t\t\tthis.medium_width = this.WIDTH / 3.5;\n\t\t\tthis.medium_height = this.HEIGHT / 10;\n\n\t\t\tthis.std_font_size =\n\t\t\tMath.sqrt(Math.pow(this.std_width, 2) + Math.pow(this.std_height, 2)) /\n\t\t\t8;\n\t\t\tthis.medium_font_size =\n\t\t\tMath.sqrt(\n\t\t\t\tMath.pow(this.medium_width, 2) + Math.pow(this.medium_height, 2)\n\t\t\t) / 14;\n\t\t\tthis.small_font_size =\n\t\t\tMath.sqrt(\n\t\t\t\tMath.pow(this.small_square_diameter, 2) +\n\t\t\t\tMath.pow(this.small_square_diameter, 2)\n\t\t\t) / 1.7;\n\n\t\t\tthis.medium_square_diameter = this.DIAGONAL / 14;\n\t\t\tthis.small_square_diameter = this.DIAGONAL / 28;\n\n\t\t\tthis.original_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.city_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.casino_map.resize(this.WIDTH, this.HEIGHT);\n\t\t\tthis.secret_map.resize(this.WIDTH, this.HEIGHT);\n\n\t\t\tthis.TOP_BOUND = this.original_map.wall_width * 2;\n\t\t\tthis.BOT_BOUND = this.HEIGHT - this.original_map.wall_width * 2;\n\t\t\tthis.LEFT_BOUND = 0;\n\t\t\tthis.RIGHT_BOUND = this.WIDTH;\n\t\t}\n\t\t}\n\n\t\tclass Errors {\n\t\tgame_full: boolean = false;\n\t\tgame_not_found: boolean = false;\n\t\tgame_not_public: boolean = false;\n\t\talready_in_game: boolean = false;\n\n\t\tconstructor() {\n\t\t\tthis.set_false();\n\t\t}\n\n\t\tset_false() {\n\t\t\tthis.game_full = false;\n\t\t\tthis.game_not_found = false;\n\t\t\tthis.game_not_public = false;\n\t\t\tthis.already_in_game = false;\n\t\t}\n\t\t}\n\n\t\tclass Game {\n\t\tplayers: Player[];\n\t\tbreakouts : BreakOut[];\n\t\tscore: [number, number];\n\t\tscore_limit: number;\n\t\tpong: any;\n\t\ttimer: number;\n\t\tstate: string;\n\t\troom_id: string;\n\t\tpublicity: string;\n\t\tlocal: boolean;\n\t\tai: boolean;\n\t\tframes_since_point: number;\n\t\tmap: GameMap;\n\n\t\ttimeout : any;\n\n\t\tspectator: boolean;\n\t\thover_spectator: boolean;\n\n\t\tframe_count_shake: number;\n\n\t\tconstructor() {\n\t\t\tthis.players = [];\n\t\t\tthis.breakouts = [];\n\t\t\tthis.pong = null;\n\t\t\tthis.score = [0, 0];\n\t\t\tthis.score_limit = 10;\n\t\t\tthis.timer = 3;\n\t\t\tthis.state = \"in-menu\";\n\t\t\tthis.room_id = \"null\";\n\t\t\tthis.publicity = \"public\";\n\t\t\tthis.local = false;\n\t\t\tthis.ai = false;\n\t\t\tthis.frames_since_point = 0;\n\t\t\tthis.map = consts.original_map;\n\t\t\tthis.spectator = false;\n\t\t\tthis.hover_spectator = false;\n\t\t\tthis.frame_count_shake = 0;\n\t\t}\n\n\t\treset() {\n\t\t\tthis.players = [];\n\t\t\tthis.breakouts = [];\n\t\t\tthis.score = [0, 0];\n\t\t\tthis.score_limit = 10;\n\t\t\tthis.timer = 3;\n\t\t\tthis.state = \"in-menu\";\n\t\t\tthis.room_id = \"null\";\n\t\t\tthis.publicity = \"public\";\n\t\t\tthis.local = false;\n\t\t\tthis.ai = false;\n\t\t\tthis.frames_since_point = 0;\n\t\t\tthis.map = consts.original_map;\n\t\t\tthis.spectator = false;\n\t\t\tthis.hover_spectator = false;\n\t\t\tthis.frame_count_shake = 0;\n\t\t}\n\n\t\tover(): boolean {\n\t\t\tif (\n\t\t\tthis.score[0] >= this.score_limit ||\n\t\t\tthis.score[1] >= this.score_limit\n\t\t\t)\n\t\t\treturn true;\n\t\t\treturn false;\n\t\t}\n\n\t\tscorePoint(invert: boolean) {\n\t\t\treset_ai_pos = true;\n\t\t\tthis.frame_count_shake = 0;\n\t\t\taudio_files.playScore();\n\t\t\tthis.pong.velocity = [0, 0];\n\t\t\tthis.pong.pos = [\n\t\t\tconsts.WIDTH / 2 - consts.PONG_DIAMETER / 2,\n\t\t\tconsts.HEIGHT / 2 - consts.PONG_DIAMETER / 2,\n\t\t\t];\n\t\t\tif (!invert) {\n\t\t\tif (this.pong.value === -1 && this.score[0] > 0) this.score[0]--;\n\t\t\telse if (this.pong.value !== -1) this.score[1] += this.pong.value;\n\t\t\t} else {\n\t\t\tif (this.pong.value === -1 && this.score[1] > 0) this.score[1]--;\n\t\t\telse if (this.pong.value !== -1) this.score[0] += this.pong.value;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\tif (this.over()) {\n\t\t\t\tthis.setState(\"game-over\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState(\"relaunch-countdown\");\n\t\t\tthis.timer = 2;\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// ? Might want to check for existence of canvas before playing sounds\n\t\t\t\t\tthis.timer--;\n\t\t\t\t\tif (this.timer === 0) audio_files.playBip(audio_files.BIP_FINAL);\n\t\t\t\t\telse if (this.timer > 0) audio_files.playBip(audio_files.BIP);\n\t\t\t\t\tif (this.timer === -1 && this.state === \"relaunch-countdown\")\n\t\t\t\t\t\tthis.setState(\"in-game\");\n\t\t\t\t}, i * 1000);\n\t\t\t}\n\t\t\tif (invert) this.pong.relaunchPong(\"right\");\n\t\t\telse this.pong.relaunchPong(\"left\");\n\t\t\tthis.frames_since_point = 0;\n\t\t\t}, 500);\n\t\t}\n\n\t\tsetState(state: string) {\n\t\t\tthis.state = state;\n\t\t\taudio_files.playAppropriateMusic(this.state, this.map.name);\n\t\t}\n\t\t}\n\n\t\tclass GameMap {\n\t\twalls: [\n\t\t\t[number, number],\n\t\t\t[number, number]\n\t\t][]; // [pos_x, pos_y], [width, height]\n\t\tindex: number;\n\t\twidth: number;\n\t\theight: number;\n\n\t\twall_width: number;\n\t\tbackground: any;\n\t\tobject_color: string;\n\t\tname: string;\n\n\t\tconstructor(index: number, w: number, h: number) {\n\t\t\tthis.index = index;\n\t\t\tthis.name = \"original\";\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t\tthis.wall_width = 0;\n\t\t\tthis.object_color = \"\"\n\t\t\tthis.walls = [[[0,0],[0,0]]]\n\t\t\tthis.resize(w, h);\n\t\t}\n\n\t\toriginalMap() {\n\t\t\tthis.object_color = \"white\";\n\t\t\tthis.background = null;\n\t\t}\n\n\t\tcityMap() {\n\t\t\tthis.object_color = \"#ffffff\";\n\t\t\tif (consts) this.background = consts.CITY_BACKGROUND;\n\t\t}\n\n\t\tcasinoMap() {\n\t\t\tthis.object_color = \"#ffffff\";\n\t\t\tif (consts) this.background = consts.TOKYO_BACKGROUND;\n\t\t}\n\t\tsecretMap() {\n\t\t\tthis.object_color = \"#ffffff\";\n\t\t\tthis.background = null;\n\t\t}\n\n\t\trender(ratio: number) {\n\t\t\tlet map_width = this.width * ratio;\n\t\t\tlet map_height = this.height * ratio;\n\t\t\tlet top_bound = map_height / 75;\n\t\t\tlet bot_bound = map_height - map_height / 75;\n\n\t\t\tp.push();\n\t\t\tp.noStroke();\n\t\t\tif (this.background)\n\t\t\tp.image(this.background, 0, 0, map_width, map_height);\n\n\t\t\tp.push();\n\t\t\tp.fill(\"rgba(0, 0, 0, 0.60)\");\n\t\t\tp.rect(0, 0, map_width, map_height);\n\t\t\tp.pop();\n\t\t\tp.fill(this.object_color);\n\t\t\tif (ratio === 1) {\n\t\t\tp.push();\n\t\t\tp.fill(\"rgba(255, 255, 255, 0.6)\");\n\t\t\tp.textSize(consts.small_font_size / 2);\n\t\t\tp.text(\n\t\t\t\t\"Room #\" + game.room_id,\n\t\t\t\tconsts.WIDTH * 0.02,\n\t\t\t\tconsts.HEIGHT * 0.03 + consts.small_font_size / 2\n\t\t\t); // room id\n\t\t\toutputScore(map_width, map_height);\n\t\t\tp.pop();\n\t\t\t}\n\n\t\t\tp.push();\n\t\t\tp.stroke(this.object_color);\n\t\t\tfor (\n\t\t\tlet i: number = top_bound;\n\t\t\ti < bot_bound;\n\t\t\ti += this.wall_width * 8 * ratio\n\t\t\t)\n\t\t\tp.rect(\n\t\t\t\tmap_width / 2,\n\t\t\t\ti,\n\t\t\t\tthis.wall_width * ratio,\n\t\t\t\tthis.wall_width * 2 * ratio\n\t\t\t); // line in the middle\n\t\t\tfor (const wall of this.walls) // bounds\n\t\t\tp.rect(\n\t\t\t\twall[0][0] * ratio,\n\t\t\t\twall[0][1] * ratio,\n\t\t\t\twall[1][0] * ratio,\n\t\t\t\twall[1][1] * ratio\n\t\t\t);\n\t\t\tp.pop();\n\t\t\tp.pop();\n\t\t\tif (this.name === \"city\")\n\t\t\tfor (let bumper of bumpers) bumper.render(ratio);\n\t\t\tif (this.name === \"secret\")\n\t\t\tfor (let breakout of game.breakouts) breakout.render();\n\t\t}\n\n\t\tresize(w: number, h: number) {\n\t\t\tthis.width = w;\n\t\t\tthis.height = h;\n\t\t\tthis.wall_width = this.width / 240;\n\t\t\tthis.walls = [\n\t\t\t[\n\t\t\t\t[this.wall_width, this.wall_width],\n\t\t\t\t[this.width - this.wall_width * 2, this.wall_width]\n\t\t\t],\n\t\t\t[\n\t\t\t\t[this.wall_width, this.height - this.wall_width * 2],\n\t\t\t\t[this.width - this.wall_width * 2, this.wall_width]\n\t\t\t]\n\t\t\t];\n\t\t\tif (this.index === 1) this.originalMap();\n\t\t\telse if (this.index === 2) {\n\t\t\tthis.name = \"city\";\n\t\t\tthis.cityMap();\n\t\t\t} else if (this.index === 3) {\n\t\t\tthis.name = \"casino\";\n\t\t\tthis.casinoMap();\n\t\t\t}\n\t\t\telse if (this.index === 4) {\n\t\t\t\tthis.walls = [\n\t\t\t\t\t[\n\t\t\t\t\t\t[this.wall_width, this.wall_width],\n\t\t\t\t\t\t[this.width - this.wall_width * 2, this.wall_width]\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t[this.wall_width, this.height - this.wall_width * 2],\n\t\t\t\t\t\t[this.width - this.wall_width * 2, this.wall_width]\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t[this.width - this.wall_width * 2, this.wall_width],\n\t\t\t\t\t\t[this.wall_width, this.height - this.wall_width * 2]\n\t\t\t\t\t]\n\t\t\t\t];\n\t\t\t\tthis.name = \"secret\";\n\t\t\t\tthis.secretMap();\n\t\t\t}\n\t\t}\n\t\t}\n\n\tclass Inputs {\n\t\tjoin: any;\n\t\tscore_limit: any;\n\n\t\tconstructor() {\n\t\t\tthis.reset();\n\t\t\tthis.create_inputs();\n\t\t}\n\n\t\treset() {\n\t\t\tif (this.join) this.join.remove();\n\t\t\tthis.join = null;\n\t\t\tif (this.score_limit) this.score_limit.remove();\n\t\t\tthis.score_limit = null;\n\t\t}\n\n\t\tcreate_inputs() {\n\t\t\tthis.join = createCustomInput(\"\");\n\t\t\tthis.join.size(consts.WIDTH / 1.75, consts.HEIGHT / 8);\n\n\t\t\tthis.score_limit = createCustomInput(\"\");\n\t\t\tthis.score_limit.attribute(\"disabled\", \"true\");\n\t\t\tthis.score_limit.style(\"text-align\", \"center\");\n\t\t\tthis.score_limit.size(consts.WIDTH / 12, consts.HEIGHT / 10);\n\t\t\tthis.hide();\n\t\t\tthis.addParent();\n\t\t}\n\n\t\tresize() {\n\t\t\tthis.join.size(consts.WIDTH / 1.75, consts.HEIGHT / 8);\n\t\t\tthis.join.style(\"font-size\", consts.std_font_size.toString() + \"px\");\n\t\t\tthis.join.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tthis.score_limit.size(consts.WIDTH / 12, consts.HEIGHT / 10);\n\t\t\tthis.score_limit.style(\n\t\t\t\"font-size\",\n\t\t\tconsts.std_font_size.toString() + \"px\"\n\t\t\t);\n\t\t\tthis.score_limit.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t}\n\n\t\thide() {\n\t\t\tthis.join.hide();\n\t\t\tthis.score_limit.hide();\n\t\t}\n\n\t\taddParent() {\n\t\t\tif (!parent)\n\t\t\t\treturn ;\n\t\t\tthis.join.parent(document.getElementById(\"input-join\"));\n\t\t\tthis.score_limit.parent(document.getElementById(\"input-score_limit\"));\n\t\t}\n\t}\n\n\tclass Keys {\n\t\tw: any;\n\t\ta: any;\n\t\ts: any;\n\t\td: any;\n\n\t\tup: any;\n\t\tleft: any;\n\t\tdown: any;\n\t\tright: any;\n\n\t\tconstructor() {\n\t\t\tthis.w = p.loadImage(\"/assets/keys/w-key.gif\");\n\t\t\tthis.a = p.loadImage(\"/assets/keys/tile-a.png\");\n\t\t\tthis.s = p.loadImage(\"/assets/keys/s-key.gif\");\n\t\t\tthis.d = p.loadImage(\"/assets/keys/tile-d.png\");\n\t\t\tthis.up = p.loadImage(\"/assets/keys/up-key.gif\");\n\t\t\tthis.left = p.loadImage(\"/assets/keys/tile-left.png\");\n\t\t\tthis.down = p.loadImage(\"/assets/keys/down-key.gif\");\n\t\t\tthis.right = p.loadImage(\"/assets/keys/tile-right.png\");\n\t\t}\n\t}\n\n\tclass MovingText {\n\t\tpos: Vector;\n\t\tvel: Vector;\n\n\t\tmoving: boolean;\n\n\t\tleft: boolean;\n\n\t\ttext: string;\n\t\tinitial_speed: number;\n\t\tslow_speed: number;\n\n\t\ttransition_speed: number;\n\n\t\tconstructor(x: number, y: number, left: boolean, text: string) {\n\t\t\tthis.initial_speed = left\n\t\t\t? consts.DIAGONAL * 0.03\n\t\t\t: -consts.DIAGONAL * 0.03;\n\t\t\tthis.slow_speed = left\n\t\t\t? consts.DIAGONAL * 0.001\n\t\t\t: -consts.DIAGONAL * 0.001;\n\n\t\t\tthis.left = left;\n\n\t\t\tthis.pos = new Vector([x, y]);\n\t\t\tthis.vel = new Vector([this.initial_speed, 0]);\n\n\t\t\tthis.text = text;\n\t\t\tthis.moving = false;\n\n\t\t\tthis.transition_speed = consts.DIAGONAL / 400;\n\t\t}\n\n\t\tcalculatePos() {\n\t\t\tif (this.left) {\n\t\t\tif (this.pos.x > consts.WIDTH * 0.2 && this.pos.x < consts.WIDTH * 0.6)\n\t\t\t\tthis.vel.lerp(\n\t\t\t\tnew Vector([this.slow_speed, 0]),\n\t\t\t\tthis.transition_speed\n\t\t\t\t);\n\t\t\telse if (this.pos.x > consts.WIDTH * 0.6)\n\t\t\t\tthis.vel.lerp(\n\t\t\t\tnew Vector([this.initial_speed * 4, 0]),\n\t\t\t\tthis.transition_speed * 2\n\t\t\t\t);\n\t\t\tif (this.pos.x > consts.WIDTH + this.text.length * consts.std_font_size)\n\t\t\t\tthis.moving = false;\n\t\t\t} else {\n\t\t\tif (this.pos.x > consts.WIDTH * 0.4 && this.pos.x < consts.WIDTH * 0.8)\n\t\t\t\tthis.vel.lerp(\n\t\t\t\tnew Vector([this.slow_speed, 0]),\n\t\t\t\tthis.transition_speed\n\t\t\t\t);\n\t\t\telse if (this.pos.x < consts.WIDTH * 0.4)\n\t\t\t\tthis.vel.lerp(\n\t\t\t\tnew Vector([this.initial_speed * 4, 0]),\n\t\t\t\tthis.transition_speed * 2\n\t\t\t\t);\n\t\t\tif (this.pos.x + this.text.length * consts.std_font_size < 0)\n\t\t\t\tthis.moving = false;\n\t\t\t}\n\t\t\tthis.pos.x += this.vel.x;\n\t\t\tthis.pos.y += this.vel.y;\n\t\t}\n\n\t\trender() {\n\t\t\tp.push();\n\t\t\tp.fill(\"white\");\n\t\t\tp.textAlign(p.CENTER);\n\t\t\tp.textSize(consts.std_font_size);\n\t\t\tp.text(this.text, this.pos.x, this.pos.y);\n\t\t\tp.pop();\n\t\t}\n\t}\n\n\tclass BreakOut {\n\t\tpos: [number, number] = [0, 0];\n\t\twidth: number = consts.BREAKOUT_WIDTH;\n\t\theight : number = consts.BREAKOUT_HEIGHT;\n\t\tcolor: string = \"white\";\n\n\t\tconstructor(pos : [number, number], color : string) {\n\t\t\tthis.pos = pos;\n\t\t\tthis.color = color;\n\t\t}\n\n\t\trender() {\n\t\t\tp.push();\n\t\t\tp.fill(this.color);\n\t\t\tp.strokeWeight(0);\n\t\t\tp.rect(this.pos[0], this.pos[1], this.width, this.height);\n\t\t\tp.pop();\n\t\t}\n\n\t\tresize() {\n\t\t\tlet proportionnal_pos_x: number = this.pos[0] / consts.OLD_WIDTH;\n\t\t\tlet proportionnal_pos_y: number = this.pos[1] / consts.OLD_HEIGHT;\n\t\t\tthis.width = consts.BREAKOUT_WIDTH;\n\t\t\tthis.height = consts.BREAKOUT_HEIGHT;\n\t\t\tthis.pos = [\n\t\t\tconsts.WIDTH * proportionnal_pos_x,\n\t\t\tconsts.HEIGHT * proportionnal_pos_y,\n\t\t\t];\n\t\t}\n\n\t\tcheckCollisions() : boolean {\n\t\t\tlet ball_points: [\n\t\t\t\t[number, number],\n\t\t\t\t[number, number],\n\t\t\t\t[number, number],\n\t\t\t\t[number, number]\n\t\t\t] = [\n\t\t\t\tgame.pong.up(),\n\t\t\t\tgame.pong.right(),\n\t\t\t\tgame.pong.down(),\n\t\t\t\tgame.pong.left(),\n\t\t\t];\n\t\t\tfor (let i = 0 ; i < 4 ; i++) {\n\t\t\t\tlet intersection_point: [number, number, string][] = [[-1, -1, \"side\"]]; // array of one element so that the variable is referenced in functions\n\t\t\t\tcollisionBreakOut(this, intersection_point, ball_points[i]);\n\t\t\t\tif (intersection_point[0][0] !== -1) {\n\t\t\t\t\taudio_files.playRandomPaddleSound();\n\t\t\t\t\tgame.pong.velocity[0] *= -1;\n\t\t\t\t\tgame.breakouts.splice(game.breakouts.indexOf(this), 1);\n\t\t\t\t\tif (game.breakouts.length === 0)\n\t\t\t\t\t\tgame.setState(\"game-over\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tleftDown(): [number, number] {\n\t\t\treturn [this.pos[0], this.pos[1] + this.height];\n\t\t}\n\t\tleftUp() : [number, number]{\n\t\t\treturn [this.pos[0], this.pos[1]];\n\t\t}\n\t\trightDown() : [number, number]{\n\t\t\treturn [this.pos[0] + this.width, this.pos[1] + this.height];\n\t\t}\n\t\trightUp() : [number, number]{\n\t\t\treturn [this.pos[0] + this.width, this.pos[1] + this.height];\n\t\t}\n\t}\n\n\tclass Player {\n\t\tpos: [number, number] = [0, 0];\n\t\tvelocity: [number, number] = [0, 0];\n\t\twidth: number = consts.PLAYER_WIDTH;\n\t\theight: number = consts.PLAYER_HEIGHT;\n\t\tcolor: string = \"white\";\n\t\tindex: number = 0;\n\t\tid: string = \"0\";\n\t\tready: boolean = false;\n\n\t\tusername: string;\n\t\treal_id: number;\n\t\tmoving_name: MovingText;\n\n\t\ttimestep: number;\n\n\t\tconstructor(index: number, id: any, username: string, real_id: number) {\n\t\t\tif (index === 1)\n\t\t\t\tthis.pos = [\n\t\t\t\t\tconsts.WIDTH / 12,\n\t\t\t\t\tconsts.HEIGHT / 2 - consts.PLAYER_HEIGHT / 2,\n\t\t\t\t];\n\t\t\telse\n\t\t\t\tthis.pos = [\n\t\t\t\t\t(consts.WIDTH * 11) / 12,\n\t\t\t\t\tconsts.HEIGHT / 2 - consts.PLAYER_HEIGHT / 2,\n\t\t\t\t];\n\n\t\t\tthis.timestep = 0;\n\t\t\tthis.velocity = [0, 0];\n\t\t\tthis.width = consts.PLAYER_WIDTH;\n\t\t\tthis.height = consts.PLAYER_HEIGHT;\n\t\t\tthis.color = game.map.object_color;\n\t\t\tthis.index = index;\n\t\t\tthis.id = id;\n\t\t\tthis.real_id = real_id;\n\t\t\tthis.ready = false;\n\t\t\tthis.username = username;\n\n\t\t\tif (index === 1) {\n\t\t\t\tthis.moving_name = new MovingText(\n\t\t\t\t\t-consts.WIDTH * 2 + username.length * consts.std_font_size,\n\t\t\t\t\tconsts.HEIGHT * 0.35,\n\t\t\t\t\ttrue,\n\t\t\t\t\tusername\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.moving_name = new MovingText(\n\t\t\t\t\tconsts.WIDTH * 2 - username.length * consts.std_font_size,\n\t\t\t\t\tconsts.HEIGHT * 0.65 + consts.std_font_size,\n\t\t\t\t\tfalse,\n\t\t\t\t\tusername\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tmoveName() {\n\t\t\tthis.moving_name.moving = true;\n\t\t}\n\n\t\trender() {\n\t\t\tp.push();\n\t\t\tp.noStroke();\n\t\t\tp.fill(this.color);\n\t\t\tp.rect(this.pos[0], this.pos[1], this.width, this.height);\n\t\t\tp.pop();\n\t\t}\n\n\t\tresize() {\n\t\t\tlet proportionnal_y = this.pos[1] / consts.OLD_HEIGHT;\n\t\t\tthis.width = consts.PLAYER_WIDTH;\n\t\t\tthis.height = consts.PLAYER_HEIGHT;\n\t\t\tif (this.index === 1)\n\t\t\tthis.pos = [consts.WIDTH / 12, consts.HEIGHT * proportionnal_y];\n\t\t\telse\n\t\t\tthis.pos = [(consts.WIDTH * 11) / 12, consts.HEIGHT * proportionnal_y];\n\t\t}\n\n\t\tcalculateNewPos() {\n\t\t\tthis.pos[1] += this.velocity[1];\n\t\t\tif (this.pos[1] < consts.TOP_BOUND)\n\t\t\t// 10 for boundaries\n\t\t\tthis.pos[1] = consts.TOP_BOUND;\n\t\t\tif (this.pos[1] + this.height > consts.BOT_BOUND)\n\t\t\t// -10 for boundaries\n\t\t\tthis.pos[1] = consts.BOT_BOUND - this.height;\n\t\t}\n\n\t\tdistanceTo(point: [number, number]): number {\n\t\t\tlet dist: number = Math.sqrt(\n\t\t\tMath.pow(point[0] - (this.pos[0] + this.width / 2), 2) +\n\t\t\t\tMath.pow(point[1] - (this.pos[1] + this.height / 2), 2)\n\t\t\t);\n\n\t\t\treturn dist;\n\t\t}\n\n\t\tmoveUp(pos_diff : number) {\n\t\t\tthis.velocity[1] = -consts.PLAYER_SPEED;\n\t\t\tif (game.local && game.ai && this.index === 2) {\n\t\t\t\tthis.velocity[1] = -pos_diff;\n\t\t\t\tif (this.velocity[1] < -consts.AI_SPEED)\n\t\t\t\t\tthis.velocity[1] = -consts.AI_SPEED;\n\t\t\t}\n\t\t\tthis.calculateNewPos();\n\t\t}\n\n\t\tmoveDown(pos_diff : number) {\n\t\t\tthis.velocity[1] = consts.PLAYER_SPEED;\n\t\t\tif (game.local && game.ai && this.index === 2) {\n\t\t\t\tthis.velocity[1] = -pos_diff;\n\t\t\t\tif (this.velocity[1] > consts.AI_SPEED)\n\t\t\t\t\tthis.velocity[1] = consts.AI_SPEED;\n\t\t\t}\n\t\t\tthis.calculateNewPos();\n\t\t}\n\n\t\tleftUp(): [number, number] {\n\t\t\treturn [this.pos[0], this.pos[1]];\n\t\t}\n\n\t\tleftDown(): [number, number] {\n\t\t\treturn [this.pos[0], this.pos[1] + this.height];\n\t\t}\n\n\t\trightUp(): [number, number] {\n\t\t\treturn [this.pos[0] + this.width, this.pos[1]];\n\t\t}\n\n\t\trightDown(): [number, number] {\n\t\t\treturn [this.pos[0] + this.width, this.pos[1] + this.height];\n\t\t}\n\t}\n\n\tclass Pong {\n\t\tpos: [number, number];\n\t\tvelocity: [number, number];\n\t\tdiameter: number;\n\t\tspeed: number;\n\t\tcolor: string;\n\t\tvalue: number;\n\n\t\tconstructor() {\n\t\t\tthis.pos = [\n\t\t\tconsts.WIDTH / 2 - consts.PONG_DIAMETER / 2,\n\t\t\tconsts.HEIGHT / 2 - consts.PONG_DIAMETER / 2,\n\t\t\t];\n\t\t\tthis.diameter = consts.PONG_DIAMETER;\n\t\t\tthis.color = game.map.object_color;\n\t\t\tthis.value = 1;\n\t\t\t\n\t\t\tthis.velocity = [0, 0];\n\t\t\tthis.speed = 0;\n\n\t\t\tlet side = Math.random() < 0.5 ? \"left\" : \"right\";\n\t\t\tthis.relaunchPong(side);\n\t\t}\n\n\t\tcalculateNewPos() {\n\t\t\tthis.pos[0] += this.velocity[0];\n\t\t\tthis.pos[1] += this.velocity[1];\n\t\t\tcheckCollisions();\n\t\t}\n\n\t\tresize() {\n\t\t\tlet proportionnal_pos_x: number = this.pos[0] / consts.OLD_WIDTH;\n\t\t\tlet proportionnal_pos_y: number = this.pos[1] / consts.OLD_HEIGHT;\n\t\t\tlet proportionnal_vel_x: number = this.velocity[0] / consts.OLD_WIDTH;\n\t\t\tlet proportionnal_vel_y: number = this.velocity[1] / consts.OLD_HEIGHT;\n\t\t\tthis.diameter = consts.PONG_DIAMETER;\n\t\t\tthis.pos = [\n\t\t\tconsts.WIDTH * proportionnal_pos_x,\n\t\t\tconsts.HEIGHT * proportionnal_pos_y,\n\t\t\t];\n\t\t\tthis.velocity = [\n\t\t\tconsts.WIDTH * proportionnal_vel_x,\n\t\t\tconsts.HEIGHT * proportionnal_vel_y,\n\t\t\t];\n\t\t}\n\n\t\trelaunchPong(loser_side: string) {\n\t\t\tif (game.map.name === \"secret\")\n\t\t\t\tloser_side = \"left\";\n\t\t\tthis.pos = [\n\t\t\tconsts.WIDTH / 2 - consts.PONG_DIAMETER / 2,\n\t\t\tconsts.HEIGHT / 2 - consts.PONG_DIAMETER / 2,\n\t\t\t];\n\t\t\tthis.speed = consts.PONG_BASE_SPEED;\n\t\t\tlet random_y = Math.random() < 0.5 ? -1 : 1;\n\n\t\t\tif (loser_side === \"left\") this.velocity = [-this.speed, random_y];\n\t\t\telse if (loser_side === \"right\") this.velocity = [this.speed, random_y];\n\t\t\tthis.setNewValue();\n\t\t}\n\n\t\tsetNewValue() {\n\t\t\t// values (0 -> -1) (1 - 4 -> 1) (5 - 7 -> 2) (8 - 9 -> 3) (10 -> 4)\n\t\t\tif (game.map.name !== \"casino\") return;\n\t\t\tlet rand: number = Math.floor(Math.random() * 11);\n\t\t\tif (rand === 0) this.value = -1;\n\t\t\telse if (rand <= 4) this.value = 1;\n\t\t\telse if (rand <= 7) this.value = 2;\n\t\t\telse if (rand <= 9) this.value = 3;\n\t\t\telse if (rand === 10) this.value = 4;\n\t\t}\n\n\t\tleftUp(): [number, number] {\n\t\t\treturn [this.pos[0], this.pos[1]];\n\t\t}\n\n\t\tleftDown(): [number, number] {\n\t\t\treturn [this.pos[0], this.pos[1] + this.diameter];\n\t\t}\n\n\t\trightUp(): [number, number] {\n\t\t\treturn [this.pos[0] + this.diameter, this.pos[1]];\n\t\t}\n\n\t\trightDown(): [number, number] {\n\t\t\treturn [this.pos[0] + this.diameter, this.pos[1] + this.diameter];\n\t\t}\n\n\t\tleft(): [number, number] {\n\t\t\treturn [this.pos[0], this.cY()];\n\t\t}\n\n\t\tright(): [number, number] {\n\t\t\treturn [this.pos[0] + this.diameter, this.cY()];\n\t\t}\n\n\t\tup(): [number, number] {\n\t\t\treturn [this.cX(), this.pos[1]];\n\t\t}\n\n\t\tdown(): [number, number] {\n\t\t\treturn [this.cX(), this.pos[1] + this.diameter];\n\t\t}\n\n\t\tballMoves(pos: [number, number]): [number, number] {\n\t\t\treturn [pos[0] + this.velocity[0], pos[1] + this.velocity[1]];\n\t\t}\n\n\t\tcX(): number {\n\t\t\treturn this.pos[0] + this.diameter / 2;\n\t\t}\n\n\t\tcY(): number {\n\t\t\treturn this.pos[1] + this.diameter / 2;\n\t\t}\n\n\t\tcenter(): [number, number] {\n\t\t\treturn [this.cX(), this.cY()];\n\t\t}\n\n\t\tcenterNextFrame(): [number, number] {\n\t\t\treturn [this.cX() + this.velocity[0], this.cY() + this.velocity[1]];\n\t\t}\n\n\t\trender() {\n\t\t\tif (this.value === -1) this.color = \"#80ff80\"; // green\n\t\t\tif (this.value === 1) this.color = \"white\";\n\t\t\telse if (this.value === 2) this.color = \"#ffff4d\"; // yellow\n\t\t\telse if (this.value === 3) this.color = \"#ffa64d\"; // orange\n\t\t\telse if (this.value === 4) this.color = \"#ff4d4d\"; // red\n\t\t\tp.push();\n\t\t\tp.noStroke();\n\t\t\tp.fill(this.color);\n\t\t\tp.rect(this.pos[0], this.pos[1], this.diameter, this.diameter);\n\t\t\tp.pop();\n\t\t}\n\t}\n\n\tfunction removeChildren(id : string) {\n\t\tconst parent = document.getElementById(id);\n\t\tif (!parent)\n\t\t\treturn ;\n\t\twhile (parent.lastChild)  {\n\t\t\tparent.removeChild(parent.lastChild);\n\t\t}\n\t}\n\n\tfunction sub_vec(v1: Vector, v2: Vector): Vector {\n\t\tlet ret: Vector = new Vector([v1.x, v1.y]);\n\t\tret.x -= v2.x;\n\t\tret.y -= v2.y;\n\t\treturn ret;\n\t}\n\n\tclass Vector {\n\t\tx: number;\n\t\ty: number;\n\n\t\tconstructor(pos: [number, number]) {\n\t\t\tthis.x = pos[0];\n\t\t\tthis.y = pos[1];\n\t\t}\n\n\t\tadd(other: Vector) {\n\t\t\tthis.x += other.x;\n\t\t\tthis.y += other.y;\n\t\t}\n\n\t\tmult(nbr: number) {\n\t\t\tthis.x *= nbr;\n\t\t\tthis.y *= nbr;\n\t\t}\n\n\t\tmag() {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t}\n\n\t\tnormalize() {\n\t\t\tthis.x /= this.mag();\n\t\t\tthis.y /= this.mag();\n\t\t}\n\n\t\tdot(other: Vector): number {\n\t\t\tlet ret: number = 0;\n\n\t\t\tret += this.x * other.x;\n\t\t\tret += this.y * other.y;\n\t\t\treturn ret;\n\t\t}\n\n\t\tlerp(other: Vector, amount: number) {\n\t\t\tif (this.x > other.x) this.x -= amount;\n\t\t\telse if (this.x < other.x) this.x += amount;\n\t\t\tif (this.y > other.y) this.y -= amount;\n\t\t\telse if (this.y < other.y) this.y += amount;\n\t\t}\n\t}\n\n\tfunction deleteEverything() {\n\t\tremoveChildren(\"button-create\");\n\t\tremoveChildren(\"button-join\");\n\t\tremoveChildren(\"button-matchmaking\");\n\t\t\n\t\tremoveChildren(\"button-anyone\");\n\t\tremoveChildren(\"button-invitation\");\n\t\tremoveChildren(\"button-local\");\n\t\t\n\t\tremoveChildren(\"button-ai\");\n\t\tremoveChildren(\"button-validate\");\n\t\tremoveChildren(\"button-return\");\n\t\tremoveChildren(\"button-sound\");\n\t\tremoveChildren(\"button-map-original\");\n\t\tremoveChildren(\"button-map-city\");\n\t\tremoveChildren(\"button-map-casino\");\n\t\tremoveChildren(\"button-map-secret\");\n\t\tremoveChildren(\"button-spectate\");\n\t\tremoveChildren(\"button-plus\");\n\t\tremoveChildren(\"button-minus\");\n\t\t\n\t\tremoveChildren(\"input-join\");\n\t\tremoveChildren(\"input-score_limit\");\n\t\tremoveChildren(\"button-opp-left-ok\");\n\t}\n\n\tfunction resizeEverything() {\n\t\tif (consts) consts.resize();\n\t\tif (game) {\n\t\t\tfor (let player of game.players) if (player) player.resize();\n\t\t\tif (game.pong) game.pong.resize();\n\t\t\tif (game.map) game.map.resize(consts.WIDTH, consts.HEIGHT);\n\t\t\tif (game.breakouts) for (let breakout of game.breakouts) breakout.resize();\n\t\t}\n\t\tif (buttons) buttons.resize();\n\t\tif (inputs) inputs.resize();\n\t\tif (bumpers) for (let bumper of bumpers) bumper.resize();\n\t}\n\n\tp.preload = () => {\n\t\tparent = document.getElementById(\"canvas-pong-parent\");\n\t\tconsts = new Consts();\n\t\tkeys = new Keys();\n\n\t\tspritedata = p.loadJSON(\"/assets/sprites/bumper.json\");\n\t\tspritesheet = p.loadImage(\"/assets/sprites/bumper.png\");\n\t};\n\n\tlet parent: any;\n\n\tp.setup = () => {\n\t\tcanvas = p.createCanvas(consts.WIDTH, consts.HEIGHT);\n\t\tcanvas.parent(parent);\n\n\t\tlet frames = spritedata.frames;\n\t\tfor (let i = 0; i < frames.length; i++) {\n\t\t\tlet pos = frames[i].position;\n\t\t\tlet img = spritesheet.get(pos.x, pos.y, pos.w, pos.h);\n\t\t\tfor (let j = 0; j < frames[i].time; j++) animation.push(img);\n\t\t}\n\t\tlet diameter = consts.DIAGONAL * 0.1;\n\n\t\tbumpers.push(\n\t\t\tnew Bumper(\n\t\t\tanimation,\n\t\t\tconsts.WIDTH / 2 - diameter / 2,\n\t\t\t(consts.HEIGHT * 1) / 4 - diameter / 2,\n\t\t\tdiameter,\n\t\t\t1\n\t\t\t)\n\t\t);\n\t\tbumpers.push(\n\t\t\tnew Bumper(\n\t\t\tanimation,\n\t\t\tconsts.WIDTH / 2 - diameter / 2,\n\t\t\t(consts.HEIGHT * 3) / 4 - diameter / 2,\n\t\t\tdiameter,\n\t\t\t2\n\t\t\t)\n\t\t);\n\t\tif (!game)\n\t\t\tgame = new Game();\n\t\tinputs = new Inputs();\n\t\terrors = new Errors();\n\t\tbuttons = new Buttons();\n\t\t\t\n\t\tif (!parent) {\n\t\t\tdeleteEverything();\n\t\t\tp.remove();\n\t\t\treturn ;\n\t\t}\n\t\tp.background(0);\n\t\tp.textFont(consts.FONT);\n\t\tp.frameRate(60);\n\n\n\t\tresizeEverything();\n\t\t// ? server keeps a boolean for each client to tell if they've loaded fully or not\n\t\t// ? so that when they are, it can send them to matches for invitation\n\t};\n\n\tp.keyPressed = () => {\n\t\tif (game === null) return;\n\t\tif (game.local && p.key === \"p\") {\n\t\t\tif (game.timeout)\n\t\t\t\tclearTimeout(game.timeout);\n\t\t\tinMainMenu();\n\t\t}\n\t\tif (game.state === \"in-menu-input\" && p.keyCode === p.ENTER) {\n\t\t\tif (inputs.join.value()[0] === \"#\")\n\t\t\t\tinputs.join.value(inputs.join.value().slice(1));\n\t\t}\n\t}\n\n\tlet width: number;\n\tlet height: number;\n\t\t\n\tp.draw = () => {\n\t\tparent = document.getElementById(\"canvas-pong-parent\");\n\t\tif (!parent) {\n\t\t\tdeleteEverything();\n\t\t\tp.remove();\n\t\t\treturn ;\n\t\t}\n\n\t\twidth = parent.clientWidth;\n\t\theight = parent.clientHeight;\n\t\t\n\t\tif (width !== canvas.width || height !== canvas.height) {\n\t\t\tp.noLoop();\n\t\t\tresizeEverything();\n\n\t\t\tp.resizeCanvas(consts.WIDTH, consts.HEIGHT);\n\t\t\tp.loop();\n\t\t}\n\n\t\taudio_files.playAppropriateMusic(game.state, game.map.name);\n\t\tp.push();\n\t\tif (\n\t\t\t(game.score[0] !== 0 || game.score[1] !== 0) &&\n\t\t\t(game.state === \"in-game\" || game.state === \"relaunch-countdown\") &&\n\t\t\tgame.frame_count_shake < 30\n\t\t) {\n\t\t\tgame.frame_count_shake++;\n\t\t\tp.translate(Math.floor(p.random(-5, 6)), Math.floor(p.random(-5, 6)));\n\t\t}\n\t\tp.clear(0, 0, 0, 0);\n\t\tp.background(0);\n\t\tif (\n\t\t\tgame.state === \"waiting-player\" ||\n\t\t\tgame.state === \"waiting-readiness\" ||\n\t\t\tgame.state === \"countdown\" ||\n\t\t\tgame.state === \"relaunch-countdown\" ||\n\t\t\tgame.state === \"in-game\"\n\t\t)\n\t\t\tgame.map.render(1);\n\t\tif (\n\t\t\tgame.state === \"in-menu-input\" ||\n\t\t\tgame.state === \"waiting-player\" ||\n\t\t\tgame.state === \"in-menu-create\"\n\t\t)\n\t\tp.image(\n\t\t\tconsts.RETURN_ICON,\n\t\t\tconsts.WIDTH * 0.9,\n\t\t\tconsts.HEIGHT * 0.01,\n\t\t\tconsts.medium_square_diameter,\n\t\t\tconsts.medium_square_diameter\n\t\t\t);\n\t\tif (game.state === \"in-menu-create\") {\n\t\t\tdrawMinimaps();\n\t\t\toutputAnnouncement(\n\t\t\t\"Game Creation\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 7,\n\t\t\t\"white\"\n\t\t\t);\n\t\t\toutputAnnouncement(\n\t\t\t\"score limit   \",\n\t\t\tconsts.medium_font_size,\n\t\t\t(consts.WIDTH * 1.2) / 5,\n\t\t\tconsts.HEIGHT * 0.48,\n\t\t\t\"white\"\n\t\t\t);\n\t\t}\n\t\tif (game.state === \"opponent-left-menu\" && game.spectator === true)\n\t\t\toutputAnnouncement(\n\t\t\t\"A player left\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\t\"white\"\n\t\t\t);\n\t\telse if (game.state === \"opponent-left-menu\")\n\t\t\toutputAnnouncement(\n\t\t\t\"Your opponent left\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\t\"white\"\n\t\t\t);\n\t\tif (game.state === \"in-menu\") {\n\t\t\toutputAnnouncement(\"You can press P during a game to quit it\", consts.small_font_size * 0.35, consts.WIDTH * 0.25, consts.HEIGHT * 0.05, \"rgba(255, 255, 255, 0.6)\");\n\t\t\toutputAnnouncement(\n\t\t\t\"The Ponger's Guide\",\n\t\t\tconsts.std_font_size * 1.25,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 4,\n\t\t\t\"white\"\n\t\t\t);\n\t\t\toutputAnnouncement(\n\t\t\t\t\"to the Galaxy\",\n\t\t\t\tconsts.std_font_size * 1.25,\n\t\t\t\tconsts.WIDTH / 2,\n\t\t\t\tconsts.HEIGHT * 0.35,\n\t\t\t\t\"white\"\n\t\t\t\t);\n\t\t}\n\t\telse if (game.state === \"in-menu-input\") {\n\t\t\tdrawSpectate();\n\t\t\toutputAnnouncement(\n\t\t\t\"Enter Room ID\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\t(consts.HEIGHT * 2) / 5,\n\t\t\t\"white\"\n\t\t\t);\n\t\t\tif (errors.game_full)\n\t\t\toutputAnnouncement(\n\t\t\t\t\"This game is already full\",\n\t\t\t\tconsts.small_font_size,\n\t\t\t\tconsts.WIDTH / 2,\n\t\t\t\tconsts.HEIGHT / 2,\n\t\t\t\t\"white\"\n\t\t\t);\n\t\t\telse if (errors.game_not_found)\n\t\t\toutputAnnouncement(\n\t\t\t\t\"This game doesn't exist\",\n\t\t\t\tconsts.small_font_size,\n\t\t\t\tconsts.WIDTH / 2,\n\t\t\t\tconsts.HEIGHT / 2,\n\t\t\t\t\"white\"\n\t\t\t);\n\t\t\telse if (errors.already_in_game)\n\t\t\toutputAnnouncement(\n\t\t\t\t\"You are already in this game\",\n\t\t\t\tconsts.small_font_size,\n\t\t\t\tconsts.WIDTH / 2,\n\t\t\t\tconsts.HEIGHT / 2,\n\t\t\t\t\"white\"\n\t\t\t);\n\t\t} else if (game.state === \"waiting-player\") {\n\t\t\tif (game.spectator) drawSpectate();\n\t\t\tbuttons.return.show();\n\t\t\tp.image(\n\t\t\tconsts.RETURN_ICON,\n\t\t\tconsts.WIDTH * 0.9,\n\t\t\tconsts.HEIGHT * 0.01,\n\t\t\tconsts.medium_square_diameter,\n\t\t\tconsts.medium_square_diameter\n\t\t\t);\n\t\t\toutputAnnouncement(\n\t\t\t\"WAITING FOR ANOTHER PLAYER\",\n\t\t\tconsts.medium_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\t\"white\"\n\t\t\t);\n\t\t} else if (game.state === \"waiting-readiness\") {\n\t\t\tif (game.spectator) drawSpectate();\n\t\t\tdrawPlayerReadiness();\n\t\t\toutputAnnouncement(\n\t\t\t\"PLEASE PRESS SPACE TO START THE GAME\",\n\t\t\tconsts.medium_font_size,\n\t\t\tconsts.WIDTH / 2,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\t\"white\"\n\t\t\t);\n\t\t} else if (game.state === \"countdown\") {\n\t\t\tif (game.spectator) drawSpectate();\n\t\t\toutputCountdown();\n\t\t\tdrawBallIntent();\n\t\t\tif (!game.local && !game.spectator) drawHelp();\n\t\t\tif (!game.spectator) drawInput();\n\t\t\tfor (let i: number = 0; i < game.players.length; i++) {\n\t\t\tgame.players[i].render();\n\t\t\tgame.players[i].moveName();\n\t\t\t}\n\t\t\tfor (let player of game.players) {\n\t\t\tif (player.moving_name.moving) {\n\t\t\t\tplayer.moving_name.render();\n\t\t\t\tplayer.moving_name.calculatePos();\n\t\t\t}\n\t\t\t}\n\t\t} else if (game.state === \"relaunch-countdown\") {\n\t\t\tif (game.spectator) drawSpectate();\n\t\t\toutputCountdown();\n\t\t\tmovePlayers();\n\t\t\tfor (let player of game.players) player.render();\n\t\t\tgame.pong.render();\n\t\t\tdrawBallIntent();\n\t\t\toutputPlayerNames();\n\t\t} else if (game.state === \"in-game\") {\n\t\t\tif (game.spectator) drawSpectate();\n\t\t\tmovePlayers();\n\t\t\tif (game.state === \"in-game\") {\n\t\t\tfor (let i: number = 0; i < game.players.length; i++)\n\t\t\t\tgame.players[i].render();\n\t\t\tgame.pong.render();\n\t\t\tif (game.map.name === \"city\")\n\t\t\t\tfor (let bumper of bumpers) bumper.render();\n\t\t\t}\n\t\t\tif (game.frames_since_point < 180 && game.map.name === \"casino\")\n\t\t\toutputAnnouncement(\n\t\t\t\tgame.pong.value +\n\t\t\t\t(game.pong.value === 1 || game.pong.value === -1\n\t\t\t\t\t? \" point\"\n\t\t\t\t\t: \" points\"),\n\t\t\t\tconsts.std_font_size,\n\t\t\t\tconsts.WIDTH * 0.5,\n\t\t\t\tconsts.HEIGHT * 0.95,\n\t\t\t\tgame.pong.color\n\t\t\t);\n\t\t\toutputPlayerNames();\n\t\t} else if (game.state === \"game-over\") {\n\t\t\tbuttons.opponent_left_ok.show();\n\t\t\tif (game.players.length === 2)\n\t\t\toutputAnnouncement(\n\t\t\t\t(game.score[0] > game.score[1]\n\t\t\t\t? game.players[0].username\n\t\t\t\t: game.players[1].username) + \" won the game!\",\n\t\t\t\tconsts.std_font_size,\n\t\t\t\tp.width / 2,\n\t\t\t\tp.height / 2,\n\t\t\t\t\"white\"\n\t\t\t);\n\t\t\telse if (game.map.name === \"secret\") {\n\t\t\t\tif (game.score[1] < game.score_limit)\n\t\t\t\t\toutputAnnouncement(\"You won!\", consts.std_font_size, p.width / 2, p.height / 2, \"white\");\n\t\t\t\telse \n\t\t\t\t\toutputAnnouncement(\"You lost.\", consts.std_font_size, p.width / 2, p.height / 2, \"white\");\n\t\t\t}\n\t\t\toutputScore(consts.WIDTH, consts.HEIGHT);\n\t\t}\n\t\tif (\n\t\t\tgame.state === \"in-menu\" ||\n\t\t\tgame.state === \"waiting-player\" ||\n\t\t\tgame.state === \"waiting-readiness\"\n\t\t) {\n\t\t\tdrawSound();\n\t\t\tbuttons.sound.show();\n\t\t}\n\t\tp.pop();\n\t};\n\n\tfunction addBreakouts() {\n\t\tlet length = 10;\n\t\tlet space = (consts.HEIGHT - consts.secret_map.wall_width * 2 - (consts.BREAKOUT_HEIGHT * length)) / (length + 2);\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#6699ff\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 1.5, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#6699ff\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 3, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#00cc66\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 4.5, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#00cc66\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 6, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ffff00\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 7.5, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ffff00\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 9, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ff9933\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 10.5, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ff9933\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 12, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ff0000\"));\n\t\tfor (let i = 0; i < length; i++)\n\t\t\tgame.breakouts.push(new BreakOut([consts.WIDTH * 0.8 + consts.BREAKOUT_WIDTH * 13.5, consts.secret_map.wall_width + space + (i) * (space + consts.BREAKOUT_HEIGHT)], \"#ff0000\"));\n\t}\n\n\tfunction createCustomButton(\n\ttitle: string,\n\tmPressed: any,\n\tmOver: any,\n\tmOut: any,\n\tsize_x: number,\n\tsize_y: number\n\t) {\n\t\tlet button = p.createButton(title);\n\t\tbutton.style(\"color\", \"white\");\n\t\tbutton.style(\n\t\t\t\"font-size\",\n\t\t\t(Math.sqrt(Math.pow(size_x, 2) + Math.pow(size_y, 2)) / 8).toString() +\n\t\t\t\"px\"\n\t\t);\n\t\tbutton.style(\"font-family\", \"PressStart2P-Regular\");\n\t\tbutton.style(\"background-color\", \"black\");\n\t\tbutton.style(\"border-radius\", \"1em\");\n\t\tbutton.size(size_x, size_y); // 280, 175 default\n\n\t\tbutton.mousePressed(mPressed);\n\t\tbutton.mouseOver(mOver);\n\t\tbutton.mouseOut(mOut);\n\n\t\treturn button;\n\t}\n\n\t\tfunction createCustomInput(title: string) {\n\t\tlet input = p.createInput(title);\n\t\tinput.style(\"height\", (consts.HEIGHT / 10).toString() + \"px\");\n\t\tinput.style(\"font-size\", consts.std_font_size.toString() + \"px\");\n\t\tinput.style(\"font-family\", \"PressStart2P-Regular\");\n\t\tinput.style(\"background-color\", \"black\");\n\t\tinput.style(\"color\", \"white\");\n\t\tinput.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t);\n\t\tinput.style(\"border-radius\", \"0.5em\");\n\t\tinput.style(\"outline\", \"none\");\n\n\t\tinput.attribute(\"maxlength\", \"16\");\n\n\t\treturn input;\n\t\t}\n\n\t\tfunction outputAnnouncement(\n\t\tmsg: string,\n\t\ttext_size: number,\n\t\tpos_x: number,\n\t\tpos_y: number,\n\t\tcolor: string\n\t\t) {\n\t\tp.push();\n\t\tp.fill(color);\n\t\tp.noStroke();\n\t\tp.textSize(text_size);\n\t\tp.textAlign(p.CENTER);\n\t\tp.text(msg, pos_x, pos_y);\n\t\tp.pop();\n\t\t}\n\n\t\tfunction drawPlayerReadiness() {\n\t\tlet icon_p1, icon_p2;\n\n\t\tfor (const player of game.players) {\n\t\t\tp.push();\n\t\t\tp.textAlign(p.CENTER);\n\t\t\tp.fill(\"white\");\n\t\t\tp.push();\n\t\t\tp.textSize(consts.std_font_size);\n\t\t\tp.text(\n\t\t\t\"P\" + player.index,\n\t\t\tplayer.index === 1 ? consts.WIDTH / 4 : (consts.WIDTH * 3) / 4,\n\t\t\t(consts.HEIGHT * 2) / 3\n\t\t\t);\n\t\t\tp.pop();\n\t\t\tif (player.ready === true)\n\t\t\tplayer.index === 1\n\t\t\t\t? (icon_p1 = consts.MARK_ICON)\n\t\t\t\t: (icon_p2 = consts.MARK_ICON);\n\t\t\telse\n\t\t\tplayer.index === 1\n\t\t\t\t? (icon_p1 = consts.CROSS_ICON)\n\t\t\t\t: (icon_p2 = consts.CROSS_ICON2);\n\t\t\tp.pop();\n\t\t}\n\t\tp.image(icon_p1, consts.WIDTH * 0.3, consts.HEIGHT * 0.58, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\tp.image(icon_p2, consts.WIDTH * 0.80, consts.HEIGHT * 0.58, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t}\n\n\t\tfunction outputCountdown() {\n\t\toutputAnnouncement(\n\t\t\t\"\" + game.timer,\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH * 0.505,\n\t\t\tconsts.HEIGHT * 0.535,\n\t\t\t\"white\"\n\t\t);\n\t\t}\n\n\t\tfunction outputScore(map_width: number, map_height: number) {\n\t\tif (game.map.name === \"secret\" && (game.score_limit - game.score[1]) > 1)\n\t\t\toutputAnnouncement((game.score_limit - game.score[1]).toString() + \" lives left\", consts.std_font_size, consts.WIDTH / 2, consts.HEIGHT / 9, \"white\");\n\t\telse if (game.map.name === \"secret\" && (game.score_limit - game.score[1]) === 1)\n\t\t\toutputAnnouncement(\"1 life left\", consts.std_font_size, consts.WIDTH / 2, consts.HEIGHT / 9, \"white\");\n\t\t\telse if (game.map.name === \"secret\" && (game.score_limit - game.score[1]) === 0)\n\t\t\toutputAnnouncement(\"DEAD\", consts.std_font_size, consts.WIDTH / 2, consts.HEIGHT / 9, \"white\");\n\t\tif (game.players.length !== 2) return;\n\t\tif (game.players[0].index === 1) {\n\t\t\tp.push();\n\t\t\tp.textSize(consts.std_font_size);\n\t\t\tp.push();\n\t\t\tp.fill(game.score[0] > game.score[1] ? \"white\" : \"grey\"); // highlight better score\n\t\t\tif (game.score[0].toString().length > 1)\n\t\t\tp.text(game.score[0], map_width / 2 - map_width / 10, map_height / 9);\n\t\t\t// score\n\t\t\telse p.text(game.score[0], map_width / 2 - map_width / 16, map_height / 9); // score\n\t\t\tp.pop();\n\t\t\tp.push();\n\t\t\tp.fill(game.score[1] > game.score[0] ? \"white\" : \"grey\");\n\t\t\tp.text(game.score[1], map_width / 2 + map_width / 30, map_height / 9); // score\n\t\t\tp.pop();\n\t\t\tp.pop();\n\t\t} else {\n\t\t\tp.push();\n\t\t\tp.textSize(consts.std_font_size);\n\t\t\tp.push();\n\t\t\tp.fill(game.score[1] > game.score[0] ? \"white\" : \"grey\"); // highlight better score\n\t\t\tif (game.score[1].toString().length > 1)\n\t\t\tp.text(game.score[1], map_width / 2 - map_width / 10, map_height / 9);\n\t\t\t// score\n\t\t\telse p.text(game.score[1], map_width / 2 - map_width / 16, map_height / 9); // score\n\t\t\tp.pop();\n\t\t\tp.push();\n\t\t\tp.fill(game.score[0] > game.score[1] ? \"white\" : \"grey\");\n\t\t\tp.text(game.score[0], map_width / 2 + map_width / 30, map_height / 9); // score\n\t\t\tp.pop();\n\t\t\tp.pop();\n\t\t}\n\t\t}\n\n\t\tfunction outputPlayerNames() {\n\t\tp.push();\n\t\tp.textSize(consts.small_font_size / 2);\n\t\tp.fill(\"rgba(255, 255, 255, 0.6)\");\n\t\tp.textAlign(p.CENTER);\n\t\tif (game.players[0].index === 1) {\n\t\t\tp.text(game.players[0].username, consts.WIDTH * 0.1, consts.HEIGHT * 0.95);\n\t\t\tif (game.players.length > 1)\n\t\t\t\tp.text(game.players[1].username, consts.WIDTH * 0.9, consts.HEIGHT * 0.95);\n\t\t} else {\n\t\t\tif (game.players.length > 1)\n\t\t\t\tp.text(game.players[1].username, consts.WIDTH * 0.1, consts.HEIGHT * 0.95);\n\t\t\tp.text(game.players[0].username, consts.WIDTH * 0.9, consts.HEIGHT * 0.95);\n\t\t}\n\t\tp.pop();\n\t\t}\n\n\t\tfunction inMainMenu() {\n\t\t\tgame.reset();\n\t\t\terrors.set_false();\n\t\t\tbuttons.reset();\n\t\t\tinputs.reset();\n\t\t\tinputs.create_inputs();\n\t\t\tgame.setState(\"in-menu\");\n\t\t}\n\n\t\t// function opponentLeftMenu() {\n\t\t// game.setState(\"opponent-left-menu\");\n\t\t// buttons.hide();\n\t\t// if (buttons.opponent_left_ok.parent())\n\t\t// \tbuttons.opponent_left_ok.parent().style[\"z-index\"] = 2; // deal with buttons overlapping\n\t\t// buttons.opponent_left_ok.show();\n\t\t// }\n\n\t\tlet ai_diff : number = 0;\n\t\tlet new_ai_diff : number = 0;\n\t\tlet ai_pos : number = 0; // ? random pos on the paddle of the ai\n\t\tlet reset_ai_pos : boolean = true; // ? when true, recalculate ai pos\n\n\t\tfunction movePlayers() {\n\t\tif (!game.spectator) {\n\t\t\tif (p.keyIsDown(87)) game.players[0].moveUp(0);\n\t\t\telse if (p.keyIsDown(83)) game.players[0].moveDown(0);\n\t\t\telse game.players[0].velocity[1] = 0;\n\n\t\t\tif (game.ai) {\n\t\t\t// ? chaser ai code\n\t\t\tif (reset_ai_pos) {\n\t\t\t\tnew_ai_diff = (Math.random() * consts.PLAYER_HEIGHT);\n\t\t\t\treset_ai_pos = false;\n\t\t\t}\n\t\t\tif (ai_diff > new_ai_diff)\n\t\t\t\tai_diff -= consts.PLAYER_HEIGHT * 0.05;\n\t\t\tif (ai_diff < new_ai_diff)\n\t\t\t\tai_diff += consts.PLAYER_HEIGHT * 0.05;\n\n\t\t\tai_pos = game.players[1].pos[1] + ai_diff;\n\t\t\tif (game.pong.velocity[0] > 0) {\n\t\t\t\tlet pos_diff = ai_pos - game.pong.cY();\n\t\n\t\t\t\tif (pos_diff > 0) game.players[1].moveUp(pos_diff);\n\t\t\t\telse if (pos_diff < 0) game.players[1].moveDown(pos_diff);\n\t\t\t\telse game.players[1].velocity[1] = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet dist = consts.HEIGHT / 2 - (game.players[1].pos[1] + game.players[1].height / 2);\n\t\t\t\tif (dist < 0) {\n\t\t\t\t\tgame.players[1].moveUp(-dist);\n\t\t\t\t} \n\t\t\t\telse {\n\t\t\t\t\tgame.players[1].moveDown(-dist);\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t} else if (game.map.name !== \"secret\") {\n\t\t\tif (p.keyIsDown(p.UP_ARROW)) game.players[1].moveUp(0);\n\t\t\telse if (p.keyIsDown(p.DOWN_ARROW)) game.players[1].moveDown(0);\n\t\t\telse game.players[1].velocity[1] = 0;\n\t\t\t}\n\n\t\t\tif (game.state !== \"relaunch-countdown\" && game.local)\n\t\t\tgame.pong.calculateNewPos();\n\t\t}\n\t\t}\n\n\t\tlet arrow_anim: number = 0;\n\t\tlet arrow_anim2: number = 0;\n\t\tlet grow: boolean = true;\n\t\tlet grow2: boolean = true;\n\n\t\tlet tint_sound: boolean = false;\n\n\t\tfunction highlightSoundButton() {\n\t\ttint_sound = true;\n\t\t}\n\t\tfunction resetSoundButton() {\n\t\ttint_sound = false;\n\t\t}\n\n\t\tfunction drawSound() {\n\t\tp.push();\n\t\tif (tint_sound) p.tint(200, 200, 200);\n\t\tp.image(\n\t\t\tconsts.SOUND_ICON,\n\t\t\tconsts.WIDTH * 0.8,\n\t\t\tconsts.HEIGHT * 0.02,\n\t\t\tconsts.small_square_diameter * 1.65,\n\t\t\tconsts.small_square_diameter * 1.65\n\t\t);\n\t\tp.pop();\n\t\tlet rect_size = (consts.small_square_diameter * 1.65) / 6;\n\t\tp.push();\n\t\tp.fill(\"white\");\n\t\tp.noStroke();\n\t\tfor (let i = 0; i < audio_files.max_volume * 4; i++)\n\t\tp.rect(\n\t\t\tconsts.WIDTH * 0.88,\n\t\t\tconsts.HEIGHT * 0.03 + rect_size * i + (rect_size / 3) * i,\n\t\t\trect_size,\n\t\t\trect_size\n\t\t\t);\n\t\tp.pop();\n\t\t}\n\n\t\tfunction drawBallIntent() {\n\t\tlet arrow_width = consts.DIAGONAL * 0.01 + arrow_anim2;\n\t\tif (grow2) arrow_anim2 += consts.DIAGONAL * 0.0005;\n\t\telse arrow_anim2 -= consts.DIAGONAL * 0.0005;\n\t\tif (arrow_anim2 >= consts.DIAGONAL * 0.005) grow2 = false;\n\t\telse if (arrow_anim2 <= 0) grow2 = true;\n\t\tp.push();\n\t\tp.fill(\"white\");\n\t\tp.noStroke();\n\t\tif (game.pong.velocity[0] < 0)\n\t\tp.triangle(\n\t\t\tconsts.WIDTH / 2.5,\n\t\t\tconsts.HEIGHT * 0.49 + arrow_width / 2,\n\t\t\tconsts.WIDTH / 2.5 + arrow_width,\n\t\t\tconsts.HEIGHT * 0.49 + arrow_width + arrow_width / 2,\n\t\t\tconsts.WIDTH / 2.5 + arrow_width,\n\t\t\tconsts.HEIGHT * 0.49 - arrow_width + arrow_width / 2\n\t\t\t);\n\t\telse if (game.pong.velocity[0] > 0)\n\t\t\tp.triangle(\n\t\t\t(consts.WIDTH * 1.5) / 2.5,\n\t\t\tconsts.HEIGHT * 0.49 + arrow_width / 2,\n\t\t\t(consts.WIDTH * 1.5) / 2.5 - arrow_width,\n\t\t\tconsts.HEIGHT * 0.49 + arrow_width + arrow_width / 2,\n\t\t\t(consts.WIDTH * 1.5) / 2.5 - arrow_width,\n\t\t\tconsts.HEIGHT * 0.49 - arrow_width + arrow_width / 2\n\t\t\t);\n\t\tp.pop();\n\t\t}\n\n\t\tfunction drawHelp() {\n\t\tlet index = game.players[0].index;\n\t\tlet arrow_width = consts.DIAGONAL * 0.025 + arrow_anim;\n\t\tif (grow) arrow_anim += consts.DIAGONAL * 0.0005;\n\t\telse arrow_anim -= consts.DIAGONAL * 0.0005;\n\t\tif (arrow_anim >= consts.DIAGONAL * 0.01) grow = false;\n\t\telse if (arrow_anim <= 0) grow = true;\n\t\tp.push();\n\t\tp.fill(\"white\");\n\t\tp.noStroke();\n\t\tif (index === 1)\n\t\tp.triangle(\n\t\t\tconsts.WIDTH / 6,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\tconsts.WIDTH / 6 + arrow_width,\n\t\t\tconsts.HEIGHT / 2 + arrow_width,\n\t\t\tconsts.WIDTH / 6 + arrow_width,\n\t\t\tconsts.HEIGHT / 2 - arrow_width\n\t\t\t);\n\t\telse\n\t\tp.triangle(\n\t\t\t(consts.WIDTH * 5) / 6,\n\t\t\tconsts.HEIGHT / 2,\n\t\t\t(consts.WIDTH * 5) / 6 - arrow_width,\n\t\t\tconsts.HEIGHT / 2 + arrow_width,\n\t\t\t(consts.WIDTH * 5) / 6 - arrow_width,\n\t\t\tconsts.HEIGHT / 2 - arrow_width\n\t\t\t);\n\t\tp.pop();\n\t\t}\n\n\t\tfunction drawMinimaps() {\n\t\tconsts.original_map.originalMap();\n\t\tp.push();\n\t\tp.translate(consts.WIDTH * 0.1, consts.HEIGHT * 0.58);\n\t\tconsts.original_map.render(0.2);\n\t\tp.pop();\n\t\t// outputAnnouncement(\"Original\", 25, consts.WIDTH * 0.2, consts.HEIGHT * 0.70, \"white\");\n\n\t\tconsts.city_map.cityMap();\n\t\tp.push();\n\t\tp.translate(consts.WIDTH * 0.4, consts.HEIGHT * 0.58);\n\t\tconsts.city_map.render(0.2);\n\t\tp.pop();\n\t\t// outputAnnouncement(\"City\", 25, consts.WIDTH * 0.5, consts.HEIGHT * 0.70, \"#ffffff\");\n\n\t\tconsts.casino_map.casinoMap();\n\t\tp.push();\n\t\tp.translate(consts.WIDTH * 0.7, consts.HEIGHT * 0.58);\n\t\tconsts.casino_map.render(0.2);\n\t\tp.pop();\n\t\t// outputAnnouncement(\"Casino\", 25, consts.WIDTH * 0.8, consts.HEIGHT * 0.70, \"#ffffff\");\n\t\t}\n\n\t\tfunction drawInput() {\n\t\tif (game.local && !game.ai) {\n\t\t\tif (game.map.name !== \"secret\") {\n\t\t\t\tp.image(keys.up, consts.WIDTH * 0.78 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.66 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.left, consts.WIDTH * 0.71 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.down, consts.WIDTH * 0.78 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.right, consts.WIDTH * 0.85 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t}\n\t\t\tp.image(keys.w, consts.WIDTH * 0.21 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.16 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\tp.image(keys.a, consts.WIDTH * 0.15 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\tp.image(keys.s, consts.WIDTH * 0.22 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\tp.image(keys.d, consts.WIDTH * 0.29 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t}\n\t\telse {\n\t\t\tif (game.players[0].index === 2) {\n\t\t\t\tp.image(keys.up, consts.WIDTH * 0.78 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.66 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.left, consts.WIDTH * 0.71 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.down, consts.WIDTH * 0.78 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.right, consts.WIDTH * 0.85 + consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.75 + consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\t\n\t\t\t} else {\n\t\t\t\tp.image(keys.w, consts.WIDTH * 0.21 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.16 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.a, consts.WIDTH * 0.15 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.s, consts.WIDTH * 0.22 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t\tp.image(keys.d, consts.WIDTH * 0.29 - consts.small_square_diameter * 1.5 / 2, consts.HEIGHT * 0.25 - consts.small_square_diameter * 1.5 / 2, consts.small_square_diameter * 1.5, consts.small_square_diameter * 1.5);\n\t\t\t}\n\t\t}\n\t\t}\n\n\t\tfunction drawSpectate() {\n\t\tif (game.state === \"in-menu-input\")\n\t\t\tp.image(\n\t\t\tconsts.EYE_ICON,\n\t\t\tconsts.WIDTH * 0.04,\n\t\t\tconsts.HEIGHT * 0.01,\n\t\t\tconsts.WIDTH * 0.1,\n\t\t\tconsts.HEIGHT * 0.15\n\t\t\t);\n\t\telse\n\t\t\tp.image(\n\t\t\tconsts.EYE_ICON,\n\t\t\tconsts.WIDTH * 0.04,\n\t\t\tconsts.HEIGHT * 0.05,\n\t\t\tconsts.WIDTH * 0.1,\n\t\t\tconsts.HEIGHT * 0.15\n\t\t\t);\n\t\tif (game.hover_spectator === true) {\n\t\t\tp.push();\n\t\t\tp.fill(\"rgba(0, 0, 0, 0.2)\");\n\t\t\tp.rect(\n\t\t\tconsts.WIDTH * 0.04,\n\t\t\tconsts.HEIGHT * 0.01,\n\t\t\tconsts.WIDTH * 0.1,\n\t\t\tconsts.HEIGHT * 0.15\n\t\t\t);\n\t\t\tp.pop();\n\t\t}\n\t\tif (game.spectator === true && game.state === \"in-menu-input\") {\n\t\t\toutputAnnouncement(\n\t\t\t\"Spectate\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH * 0.32,\n\t\t\tconsts.HEIGHT * 0.11,\n\t\t\t\"white\"\n\t\t\t);\n\t\t} else if (game.spectator === false && game.state === \"in-menu-input\") {\n\t\t\toutputAnnouncement(\n\t\t\t\"Play\",\n\t\t\tconsts.std_font_size,\n\t\t\tconsts.WIDTH * 0.25,\n\t\t\tconsts.HEIGHT * 0.11,\n\t\t\t\"white\"\n\t\t\t);\n\t\t}\n\t\t}\n\t\t// Returns 1 if the lines intersect, otherwise 0. In addition, if the lines\n\t\t// intersect the intersection point may be stored in the floats i[0] and i[1].\n\n\t\tfunction getLineIntersection(\n\t\tp0: [number, number],\n\t\tp1: [number, number],\n\t\tp2: [number, number],\n\t\tp3: [number, number]\n\t\t): [number, number, string] {\n\t\tlet s1: [number, number] = [p1[0] - p0[0], p1[1] - p0[1]];\n\t\tlet s2: [number, number] = [p3[0] - p2[0], p3[1] - p2[1]];\n\n\t\tlet s: number =\n\t\t\t(-s1[1] * (p0[0] - p2[0]) + s1[0] * (p0[1] - p2[1])) /\n\t\t\t(-s2[0] * s1[1] + s1[0] * s2[1]);\n\t\tlet t: number =\n\t\t\t(s2[0] * (p0[1] - p2[1]) - s2[1] * (p0[0] - p2[0])) /\n\t\t\t(-s2[0] * s1[1] + s1[0] * s2[1]);\n\n\t\tlet i: [number, number, string] = [-1, -1, \"side\"];\n\t\tif (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n\t\t\t// Collision detected\n\t\t\ti[0] = p0[0] + t * s1[0];\n\t\t\ti[1] = p0[1] + t * s1[1];\n\t\t\treturn i;\n\t\t}\n\n\t\treturn i; // No collision\n\t\t}\n\n\t\tfunction relativeIntersection(\n\t\tintersection_point: [number, number, string],\n\t\tp1: [number, number],\n\t\tp2: [number, number]\n\t\t): number {\n\t\tlet middle: [number, number] = [\n\t\t\tp1[0] + (p2[0] - p1[0]) / 2 - intersection_point[0],\n\t\t\tp1[1] + (p2[1] - p1[1]) / 2 - intersection_point[1],\n\t\t];\n\n\t\tif (intersection_point[2] === \"side\" || intersection_point[2] === \"left\" || intersection_point[2] === \"right\")\n\t\t\treturn (middle[1] / ((p2[1] - p1[1]) / 2)) * ((3 * Math.PI) / 12);\n\t\telse return (middle[0] / ((p2[0] - p1[0]) / 2)) * ((3 * Math.PI) / 12);\n\t\t}\n\n\t\t// ? MAP BOUNDS :\n\t\t// ? top bound : 10\n\t\t// ? bottom bound : HEIGHT - 10\n\t\t// ? left bound : 0\n\t\t// ? right bound : consts.WIDTH\n\n\t\tfunction checkCollisions() {\n\t\tif (game.frames_since_point === 0) game.pong.speed = consts.PONG_BASE_SPEED;\n\t\telse if (game.pong.speed < consts.PONG_MAX_SPEED) {\n\t\t\tif (game.pong.velocity[0] > 0)\n\t\t\tgame.pong.velocity[0] += consts.PONG_ACCELERATION;\n\t\t\telse game.pong.velocity[0] -= consts.PONG_ACCELERATION;\n\t\t\tif (game.pong.velocity[1] > 0)\n\t\t\tgame.pong.velocity[1] += consts.PONG_ACCELERATION;\n\t\t\telse game.pong.velocity[1] -= consts.PONG_ACCELERATION;\n\t\t\tgame.pong.speed += consts.PONG_ACCELERATION * 2;\n\t\t}\n\n\t\tgame.frames_since_point++;\n\n\t\t// ? collision with bounds\n\t\tif (\n\t\t\tgame.pong.pos[1] < consts.TOP_BOUND ||\n\t\t\tgame.pong.pos[1] + game.pong.diameter > consts.BOT_BOUND\n\t\t) {\n\t\t\tgame.pong.velocity[1] *= -1;\n\t\t\tif (game.pong.pos[1] < consts.TOP_BOUND)\n\t\t\tgame.pong.pos[1] = consts.TOP_BOUND + consts.HEIGHT * 0.005;\n\t\t\telse if (game.pong.pos[1] + game.pong.diameter > consts.BOT_BOUND)\n\t\t\tgame.pong.pos[1] =\n\t\t\t\tconsts.BOT_BOUND - game.pong.diameter - consts.HEIGHT * 0.005;\n\t\t\taudio_files.playRandomWallSound();\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tgame.pong.velocity[0] > 0 &&\n\t\t\tgame.pong.pos[0] + game.pong.diameter > consts.RIGHT_BOUND\n\t\t) {\n\t\t\tif (game.map.name !== \"secret\")\n\t\t\t\treturn game.scorePoint(true);\n\t\t\telse {\n\t\t\t\tif (game.pong.pos[0] + game.pong.diameter > consts.RIGHT_BOUND - game.map.wall_width * 2)\n\t\t\t\t\tgame.pong.pos[0] = consts.RIGHT_BOUND - game.map.wall_width * 2 - game.pong.diameter - consts.WIDTH * 0.002;\n\t\t\t\tgame.pong.velocity[0] *= -1;\n\t\t\t\taudio_files.playRandomWallSound();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse if (game.pong.velocity[0] < 0 && game.pong.pos[0] < consts.LEFT_BOUND)\n\t\t\treturn game.scorePoint(false);\n\n\t\tif (game.map.name === \"city\") {\n\t\t\tfor (let bumper of bumpers) {\n\t\t\tif (bumper.checkCollision(game.pong)) {\n\t\t\t\tbumper.resetAnimation();\n\t\t\t\taudio_files.playRandomBumperSound();\n\t\t\t\treset_ai_pos = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (game.map.name === \"secret\")\n\t\t\tfor (let breakout of game.breakouts) if (breakout.checkCollisions()) return;\n\n\t\tlet player;\n\t\tif (game.map.name === \"secret\")\n\t\t\tplayer = game.players[0];\n\t\telse\n\t\t\tplayer = game.pong.pos[0] < consts.WIDTH / 2 ? game.players[0] : game.players[1];\n\t\tlet ball_points: [\n\t\t\t[number, number],\n\t\t\t[number, number],\n\t\t\t[number, number],\n\t\t\t[number, number]\n\t\t] = [\n\t\t\tgame.pong.up(),\n\t\t\tgame.pong.right(),\n\t\t\tgame.pong.down(),\n\t\t\tgame.pong.left(),\n\t\t];\n\t\t// debugCollisions(player);\n\n\n\t\t// ? collision with paddles\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tlet angle: number = 0;\n\t\t\tlet intersection_point: [number, number, string][] = [[-1, -1, \"side\"]]; // array of one element so that the variable is referenced in functions\n\t\t\tangle = collisionPaddle(player, intersection_point, ball_points[i]);\n\n\t\t\tif (intersection_point[0][0] !== -1) {\n\t\t\taudio_files.playRandomPaddleSound();\n\t\t\tlet max_angle_percentage: number =\n\t\t\t\tMath.abs(angle) / ((Math.PI * 3) / 12); // ? number that lets me add speed to acute angled shots\n\t\t\t// ? for bot / top collisions\n\t\t\tif (\n\t\t\t\tintersection_point[0][2] === \"top\" ||\n\t\t\t\tintersection_point[0][2] === \"bot\"\n\t\t\t) {\n\t\t\t\tif (intersection_point[0][2] === \"top\")\n\t\t\t\tgame.pong.velocity[1] =\n\t\t\t\t\t(1 +\n\t\t\t\t\tconsts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\t\tgame.pong.speed *\n\t\t\t\t\t-Math.cos(angle);\n\t\t\t\telse if (intersection_point[0][2] === \"bot\")\n\t\t\t\tgame.pong.velocity[1] =\n\t\t\t\t\t(1 +\n\t\t\t\t\tconsts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\t\tgame.pong.speed *\n\t\t\t\t\tMath.cos(angle);\n\t\t\t\tgame.pong.velocity[0] =\n\t\t\t\t(1 + consts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\tgame.pong.speed *\n\t\t\t\t-Math.sin(angle);\n\t\t\t}\n\t\t\t// ? invert velocity indexes for left / right collisions\n\t\t\telse if (intersection_point[0][2] === \"side\") {\n\t\t\t\tif (game.pong.pos[0] < consts.WIDTH / 2)\n\t\t\t\tgame.pong.velocity[0] =\n\t\t\t\t\t(1 +\n\t\t\t\t\tconsts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\t\tgame.pong.speed *\n\t\t\t\t\tMath.cos(angle);\n\t\t\t\telse\n\t\t\t\tgame.pong.velocity[0] =\n\t\t\t\t\t(1 +\n\t\t\t\t\tconsts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\t\tgame.pong.speed *\n\t\t\t\t\t-Math.cos(angle);\n\t\t\t\tgame.pong.velocity[1] =\n\t\t\t\t(1 + consts.PONG_ACCELERATION_ACUTE_ANGLE * max_angle_percentage) *\n\t\t\t\tgame.pong.speed *\n\t\t\t\t-Math.sin(angle);\n\t\t\t}\n\t\t\tif (player.index === 1)\n\t\t\t\treset_ai_pos = true;\n\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t}\n\n\t\tfunction collisionBreakOut(\t\n\t\t\tbreakout: BreakOut,\n\t\t\tintersection_point: [number, number, string][],\n\t\t\tball_point: [number, number]) {\n\t\t\t\n\t\t\tlet breakout_left_hit: [[number, number], [number, number]] = [breakout.leftUp(), breakout.leftDown()];\n\t\t\tlet breakout_right_hit: [[number, number], [number, number]] = [breakout.rightUp(), breakout.rightDown()];\n\t\t\tlet breakout_bot_hit: [[number, number], [number, number]] = [\n\t\t\t\tbreakout.leftDown(),\n\t\t\t\tbreakout.rightDown(),\n\t\t\t];\n\t\t\tlet breakout_top_hit: [[number, number], [number, number]] = [\n\t\t\t\tbreakout.leftUp(),\n\t\t\t\tbreakout.rightUp(),\n\t\t\t];\n\n\t\t\tintersection_point[0] = getLineIntersection(\n\t\t\t\tball_point,\n\t\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\t\tbreakout_left_hit[0],\n\t\t\t\tbreakout_left_hit[1]\n\t\t\t);\n\t\t\tif (intersection_point[0][0] !== -1)\n\t\t\t\treturn ;\n\t\t\t\n\t\t\tintersection_point[0] = getLineIntersection(\n\t\t\t\tball_point,\n\t\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\t\tbreakout_right_hit[0],\n\t\t\t\tbreakout_right_hit[1]\n\t\t\t);\n\t\t\tif (intersection_point[0][0] !== -1)\n\t\t\t\treturn ;\n\t\t\n\t\t\tintersection_point[0] = getLineIntersection(\n\t\t\t\tball_point,\n\t\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\t\tbreakout_bot_hit[0],\n\t\t\t\tbreakout_bot_hit[1]\n\t\t\t);\n\t\t\tif (intersection_point[0][0] !== -1)\n\t\t\t\treturn ;\n\t\t\n\t\t\tintersection_point[0] = getLineIntersection(\n\t\t\t\tball_point,\n\t\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\t\tbreakout_top_hit[0],\n\t\t\t\tbreakout_top_hit[1]\n\t\t\t);\n\t\t\tif (intersection_point[0][0] !== -1)\n\t\t\t\treturn ;\n\t\t\n\t\t\treturn ;\n\t\t}\n\n\t\tfunction collisionPaddle(\n\t\tplayer: Player,\n\t\tintersection_point: [number, number, string][],\n\t\tball_point: [number, number]\n\t\t): number {\n\t\tlet paddle_side_hit: [[number, number], [number, number]] =\n\t\t\tplayer.index === 1\n\t\t\t? [player.rightUp(), player.rightDown()]\n\t\t\t: [player.leftUp(), player.leftDown()];\n\t\tlet paddle_bot_hit: [[number, number], [number, number]] = [\n\t\t\tplayer.leftDown(),\n\t\t\tplayer.rightDown(),\n\t\t];\n\t\tlet paddle_top_hit: [[number, number], [number, number]] = [\n\t\t\tplayer.leftUp(),\n\t\t\tplayer.rightUp(),\n\t\t];\n\n\t\tintersection_point[0] = getLineIntersection(\n\t\t\tball_point,\n\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\tpaddle_side_hit[0],\n\t\t\tpaddle_side_hit[1]\n\t\t);\n\t\tintersection_point[0][2] = \"side\";\n\t\tif (intersection_point[0][0] !== -1)\n\t\t\treturn relativeIntersection(\n\t\t\tintersection_point[0],\n\t\t\tpaddle_side_hit[0],\n\t\t\tpaddle_side_hit[1]\n\t\t\t);\n\n\t\tintersection_point[0] = getLineIntersection(\n\t\t\tball_point,\n\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\tpaddle_bot_hit[0],\n\t\t\tpaddle_bot_hit[1]\n\t\t);\n\t\tintersection_point[0][2] = \"bot\";\n\t\tif (intersection_point[0][0] !== -1)\n\t\t\treturn relativeIntersection(\n\t\t\tintersection_point[0],\n\t\t\tpaddle_bot_hit[0],\n\t\t\tpaddle_bot_hit[1]\n\t\t\t);\n\n\t\tintersection_point[0] = getLineIntersection(\n\t\t\tball_point,\n\t\t\tgame.pong.ballMoves(ball_point),\n\t\t\tpaddle_top_hit[0],\n\t\t\tpaddle_top_hit[1]\n\t\t);\n\t\tintersection_point[0][2] = \"top\";\n\t\tif (intersection_point[0][0] !== -1)\n\t\t\treturn relativeIntersection(\n\t\t\tintersection_point[0],\n\t\t\tpaddle_top_hit[0],\n\t\t\tpaddle_top_hit[1]\n\t\t\t);\n\n\t\treturn 0;\n\t\t}\n\n\t\tfunction goToMainMenu() {\n\t\tif (p.mouseButton === p.LEFT) inMainMenu();\n\t\t}\n\n\t\tfunction clickMapSecret() {\n\t\t\tif (p.mouseButton === p.LEFT) {\n\t\t\t\tgame.map = consts.secret_map;\n\t\t\t\tgame.score_limit = 10;\n\t\t\t\tstartLocal();\n\t\t\t}\n\t\t}\n\n\t\tfunction clickSound() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\taudio_files.max_volume += 0.25;\n\t\t\tif (audio_files.max_volume === 0.25 && game.state === \"in-menu\")\n\t\t\taudio_files.switchMusic(\"menu\");\n\t\t\telse if (\n\t\t\taudio_files.max_volume === 0.25 &&\n\t\t\t(game.state === \"waiting-player\" || game.state === \"waiting-readiness\")\n\t\t\t)\n\t\t\taudio_files.switchMusic(game.map.name);\n\t\t} else if (p.mouseButton === p.RIGHT) audio_files.max_volume -= 0.25;\n\n\t\tif (audio_files.max_volume > 1) audio_files.max_volume = 0;\n\t\telse if (audio_files.max_volume < 0) audio_files.max_volume = 1;\n\t\taudio_files.musicPlaying().volume = audio_files.max_volume;\n\t\t}\n\n\t\tfunction createGameMenu() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\tbuttons.hide();\n\t\t\tinputs.hide();\n\n\t\t\tbuttons.return.show();\n\t\t\tbuttons.anyone_can_join.show();\n\t\t\tbuttons.local.show();\n\t\t\tbuttons.invitation_only.show();\n\t\t\tbuttons.validate.show();\n\t\t\tbuttons.plus.show();\n\t\t\tbuttons.minus.show();\n\t\t\tinputs.score_limit.show();\n\t\t\tinputs.score_limit.attribute(\"value\", game.score_limit);\n\t\t\tbuttons.opponent_left_ok.parent().style[\"z-index\"] = 0; // deal with buttons overlapping\n\n\t\t\tbuttons.map_original.show();\n\t\t\tbuttons.map_city.show();\n\t\t\tbuttons.map_casino.show();\n\t\t\tgame.setState(\"in-menu-create\");\n\t\t}\n\t\t}\n\n\tfunction createGame() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\tif (game.publicity === \"local\") startLocal();\n\t\t}\n\t}\n\tfunction matchmaking() {\n\t}\n\n\t\tfunction highlightSpectateButton() {\n\t\t// @ts-ignore: next-line\n\t\tthis.style(\"color\", \"#d4d4d4\");\n\t\tgame.hover_spectator = true;\n\t\t}\n\t\tfunction resetSpectateButton() {\n\t\t// @ts-ignore: next-line\n\t\tthis.style(\"color\", \"white\");\n\t\tgame.hover_spectator = false;\n\t\t}\n\n\t\tfunction highlightButton() {\n\t\t// @ts-ignore: next-line\n\t\tthis.style(\"color\", \"#d4d4d4\");\n\t\t}\n\t\tfunction resetButton() {\n\t\t// @ts-ignore: next-line\n\t\tthis.style(\"color\", \"white\");\n\t\t}\n\n\t\tfunction plusScoreLimit() {\n\t\tif (p.mouseButton === p.LEFT && game.score_limit < 15) {\n\t\t\tgame.score_limit++;\n\t\t\tinputs.score_limit.attribute(\"value\", game.score_limit);\n\t\t}\n\t\t}\n\t\tfunction minusScoreLimit() {\n\t\tif (p.mouseButton === p.LEFT && game.score_limit > 1) {\n\t\t\tgame.score_limit--;\n\t\t\tinputs.score_limit.attribute(\"value\", game.score_limit);\n\t\t}\n\t\t}\n\n\t\tfunction readRoomID() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\tgame.setState(\"in-menu-input\");\n\t\t\tbuttons.hide();\n\t\t\tinputs.hide();\n\t\t\tinputs.join.show();\n\t\t\tbuttons.return.show();\n\t\t\tbuttons.spectate.show();\n\t\t}\n\t\t}\n\n\t\tfunction clickSpectate() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\tgame.spectator = !game.spectator;\n\t\t\tif (!game.spectator) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\"border-color\", \"white\");\n\t\t\t} else if (game.spectator) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\"border-color\", \"#177bad\");\n\t\t\t}\n\t\t}\n\t\t}\n\n\t\tfunction clickAnyone() {\n\t\tif (p.mouseButton === p.LEFT) game.publicity = buttons.clickAnyone();\n\t\t}\n\t\tfunction clickInvitation() {\n\t\tif (p.mouseButton === p.LEFT) game.publicity = buttons.clickInvitation();\n\t\t}\n\t\tfunction clickLocal() {\n\t\tif (p.mouseButton === p.LEFT) game.publicity = buttons.clickLocal();\n\t\t}\n\n\t\tfunction clickAi() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\tif (game.ai) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\"border\", \"none\");\n\t\t\t} else {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\n\t\t\t\t\"border\",\n\t\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\t}\n\t\t\tgame.ai = !game.ai;\n\t\t}\n\t\t}\n\n\t\tfunction clickMapOriginal() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tbuttons.map_city.style(\"border\", \"none\");\n\t\t\tbuttons.map_casino.style(\"border\", \"none\");\n\t\t\tgame.map = consts.original_map;\n\t\t}\n\t\t}\n\t\tfunction clickMapCity() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tbuttons.map_original.style(\"border\", \"none\");\n\t\t\tbuttons.map_casino.style(\"border\", \"none\");\n\t\t\tgame.map = consts.city_map;\n\t\t}\n\t\t}\n\t\tfunction clickMapCasino() {\n\t\tif (p.mouseButton === p.LEFT) {\n\t\t\t// @ts-ignore : next-line\n\t\t\tthis.style(\n\t\t\t\"border\",\n\t\t\t(consts.DIAGONAL / 250).toString() + \"px solid white\"\n\t\t\t);\n\t\t\tbuttons.map_city.style(\"border\", \"none\");\n\t\t\tbuttons.map_original.style(\"border\", \"none\");\n\t\t\tgame.map = consts.casino_map;\n\t\t}\n\t\t}\n\n\t\tfunction startLocal() {\n\t\t\tgame.local = true;\n\t\t\tbuttons.hide();\n\t\t\tinputs.hide();\n\t\t\tgame.timer = 4;\n\t\t\tlet game_ref = game;\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tgame.timeout = setTimeout(() => {\n\t\t\t\tgame_ref.timer--;\n\t\t\t\tif (game_ref.timer === 0) audio_files.playBip(audio_files.BIP_FINAL);\n\t\t\t\telse if (game_ref.timer >= 0) audio_files.playBip(audio_files.BIP);\n\t\t\t\tif (game_ref.timer === -1 && game_ref.state === \"countdown\") {\n\t\t\t\tgame_ref.setState(\"in-game\");\n\t\t\t\t}\n\t\t\t}, i * 1000);\n\t\t\t}\n\t\t\tgame.setState(\"countdown\");\n\t\t\tgame.players.push(new Player(1, \"first\", \"P1\", 0));\n\t\t\tif (game.map.name !== \"secret\")\n\t\t\t\tgame.players.push(new Player(2, \"second\", \"P2\", 0));\n\t\t\telse {\n\t\t\t\taddBreakouts();\n\t\t\t}\n\t\t\tgame.pong = new Pong();\n\t\t\tgame.room_id = \"Local\";\n\t\t}\n\t\t};\n\n\t}\n"],"names":["audio_files","defineSketch","initialWidth","initialHeight","p","spritesheet","spritedata","disableFriendlyErrors","consts","game","errors","buttons","inputs","keys","canvas","animation","bumpers","Bumper","x","y","diameter","index","pos","center","speed","len","index_bumper","hit","collision","bounce_vec","frame_count_shake","this","Vector","length","DIAGONAL","WIDTH","HEIGHT","ratio","push","translate","Math","floor","random","image","pop","show","animate","pong","e","l","centerNextFrame","cp","r","d","sub_vec","f","a","dot","b","discriminant","t1","sqrt","normalize","vec_pong","velocity","mult","mag","Buttons","create_game","join","return","matchmaking","anyone_can_join","invitation_only","local","ai","validate","plus","minus","opponent_left_ok","map_original","map_city","map_casino","map_secret","spectate","sound","reset","createCustomButton","createGameMenu","highlightButton","resetButton","std_width","std_height","style","toString","readRoomID","goToMainMenu","medium_square_diameter","position","clickSound","highlightSoundButton","resetSoundButton","size","small_square_diameter","clickAnyone","medium_width","medium_height","medium_font_size","clickInvitation","clickLocal","clickAi","createGame","plusScoreLimit","small_font_size","minusScoreLimit","clickMapOriginal","clickMapCity","clickMapCasino","clickMapSecret","clickSpectate","highlightSpectateButton","resetSpectateButton","hide","addParent","std_font_size","remove","removeChildren","delete","createButtons","resize","parent","document","getElementById","Consts","OLD_WIDTH","OLD_HEIGHT","PLAYER_WIDTH","PLAYER_HEIGHT","PLAYER_SPEED","AI_SPEED","BREAKOUT_WIDTH","BREAKOUT_HEIGHT","PONG_DIAMETER","PONG_BASE_SPEED","PONG_MAX_SPEED","PONG_ACCELERATION","PONG_ACCELERATION_ACUTE_ANGLE","PONG_COLOR","TOP_BOUND","BOT_BOUND","LEFT_BOUND","RIGHT_BOUND","original_map","city_map","casino_map","secret_map","FONT","RETURN_ICON","CROSS_ICON","CROSS_ICON2","MARK_ICON","EYE_ICON","SOUND_ICON","CITY_BACKGROUND","TOKYO_BACKGROUND","GameMap","clientWidth","clientHeight","pow","wall_width","loadFont","loadImage","setWindowSize","Errors","game_full","game_not_found","game_not_public","already_in_game","set_false","Game","players","breakouts","score","score_limit","timer","state","room_id","publicity","frames_since_point","map","timeout","spectator","hover_spectator","invert","reset_ai_pos","playScore","value","setTimeout","over","setState","i","playBip","BIP_FINAL","BIP","relaunchPong","playAppropriateMusic","name","w","h","walls","width","height","background","object_color","map_width","map_height","top_bound","bot_bound","noStroke","fill","rect","textSize","text","outputScore","stroke","wall","render","originalMap","cityMap","casinoMap","secretMap","Inputs","create_inputs","createCustomInput","attribute","Keys","s","up","left","down","right","MovingText","vel","moving","initial_speed","slow_speed","transition_speed","lerp","textAlign","CENTER","BreakOut","color","strokeWeight","proportionnal_pos_x","proportionnal_pos_y","ball_points","intersection_point","collisionBreakOut","playRandomPaddleSound","splice","indexOf","Player","id","username","real_id","ready","moving_name","timestep","proportionnal_y","point","pos_diff","calculateNewPos","Pong","side","playRandomWallSound","scorePoint","bumper","checkCollision","resetAnimation","playRandomBumperSound","checkCollisions","player","angle","collisionPaddle","max_angle_percentage","abs","PI","cos","sin","proportionnal_vel_x","proportionnal_vel_y","loser_side","random_y","setNewValue","rand","cY","cX","lastChild","removeChild","v1","v2","ret","other","nbr","amount","deleteEverything","resizeEverything","title","mPressed","mOver","mOut","size_x","size_y","button","createButton","mousePressed","mouseOver","mouseOut","input","createInput","outputAnnouncement","msg","text_size","pos_x","pos_y","outputCountdown","outputPlayerNames","inMainMenu","preload","loadJSON","setup","createCanvas","frames","img","get","j","time","textFont","frameRate","keyPressed","key","clearTimeout","keyCode","ENTER","slice","draw","noLoop","resizeCanvas","loop","clear","drawSpectate","icon_p1","icon_p2","drawPlayerReadiness","drawBallIntent","arrow_width","arrow_anim","grow","triangle","drawHelp","moveName","calculatePos","movePlayers","tint_sound","tint","rect_size","max_volume","drawSound","ai_diff","new_ai_diff","ai_pos","keyIsDown","moveUp","moveDown","dist","UP_ARROW","DOWN_ARROW","arrow_anim2","grow2","getLineIntersection","p0","p1","p2","p3","s1","s2","t","relativeIntersection","middle","breakout","ball_point","breakout_left_hit","leftUp","leftDown","breakout_right_hit","rightUp","rightDown","breakout_bot_hit","breakout_top_hit","ballMoves","paddle_side_hit","paddle_bot_hit","paddle_top_hit","mouseButton","LEFT","startLocal","switchMusic","RIGHT","musicPlaying","volume","game_ref","space","addBreakouts","AudioFiles","PADDLE_HIT_1","PADDLE_HIT_2","BUMPER_HIT_1","BUMPER_HIT_2","WALL_HIT_1","WALL_HIT_2","SCORE","CASINO_MUSIC","CITY_MUSIC","ORIGINAL_MUSIC","MENU_MUSIC","music_playing","Audio","autoplay","fadeMusicDown","bip","currentTime","play","music","pause","tmp_music","fadeMusicUp","map_name","forcedUpdate","useEffect","pongSketch","default_win_width","default_win_height","p5","deleteAudio","className","memo"],"sourceRoot":""}